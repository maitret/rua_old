/**
 * Xenarius - Mobile applications for your data, built without coding.
 * @version v1.8.9 data Tue Jul 12 2016
 * @link http://www.xenarius.net
 * @license http://xenarius.net/legal/eula.html
 */
var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},AppPlayer;!function(e){var t;!function(t){"use strict";function r(t){var r=function(e){return e.value},n=e.propertyVisitor(t,r,{getValueCallback:function(t,n){return $.isPlainObject(t)&&t.results&&$.isArray(t.results)?t.results:e.propertyVisitor(t,r,n)}});return n}function n(e,t,r){var n={},i=[];return e.fields&&(i=e.fields.filter(function(e){return e.storeId&&!0})),$.each(t,function(e,t){"__metadata"===e||t&&"object"==typeof t&&t.__deferred||(n[e]=t)}),i.forEach(function(e){n[e.name]&&(n[e.name]={__metadata:{uri:r[e.storeId]._byKeyUrl(t[e.name])}})}),n}function i(e){return"string"!=typeof e?!1:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function o(t){var r=function(e){var t=e.value;return i(t)?new l.Guid(t):t};return e.propertyVisitor(t,r,{getValueCallback:function(t,n){return e.propertyVisitor(t,r,n)}})}function a(e){return e.filter?$.extend({},e,{filter:o(e.filter)}):e}function s(e,t){return"Guid"===t.keyType?new l.Guid(e):e}var l=DevExpress.data,u=function(e){function i(t,r){e.call(this,i.createODataStoreOptions(t)),this.storeOptions=t,this.stores=r}return __extends(i,e),i.createODataStoreOptions=function(e){return{url:e.debugUrl||e.url,key:e.key,keyType:e.keyType,beforeSend:t.Utils.addHeaders(e.headers),version:e.version,withCredentials:void 0!==e.withCredentials?e.withCredentials:!0}},i.prototype.load=function(t){var n=$.Deferred();return e.prototype.load.call(this,a(t)).done(function(e){n.resolve(r(e))}).fail(n.reject),n.promise()},i.prototype.byKey=function(t,n){var i=$.Deferred();return e.prototype.byKey.call(this,s(t,this.storeOptions),n).done(function(e){i.resolve(r(e))}).fail(i.reject),i.promise()},i.prototype.insert=function(t){return e.prototype.insert.call(this,n(this.storeOptions,t,this.stores))},i.prototype.update=function(t,r){return e.prototype.update.call(this,t,n(this.storeOptions,r,this.stores))},i.prototype.remove=function(t){return e.prototype.remove.call(this,s(t,this.storeOptions))},i.prototype.totalCount=function(t){return e.prototype.load.call(this,a(t))},i}(DevExpress.data.ODataStore);t.ODataStore=u}(t=e.Stores||(e.Stores={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";var r=function(r){function n(e,t,n){var i=this,o=e.load.processResult?n.createFunctionCompiler(e.load.processResult):null,a=$.extend({},e,{key:e.key,load:function(r){var n=$.Deferred();return i.handler(e,"load",{$global:t,$options:r},"get").done(function(e){o?o.run({$global:t,$data:e},{callerId:"load.processResult",callerType:"RestStore"}).done(function(e){n.resolve(e)}).fail(n.reject):n.resolve(e)}).fail(n.reject),n.promise()},byKey:function(r){var n=$.Deferred();return i.handler(e,"byKey",{$global:t,$key:r},"get").done(function(e){o?o.run({$global:t,$data:e},{callerId:"byKey.processResult",callerType:"RestStore"}).done(function(e){n.resolve(e)}).fail(n.reject):n.resolve(e)}).fail(n.reject),n.promise()},insert:function(r){var n=$.Deferred();return i.handler(e,"insert",{$global:t,$data:r},"post").done(function(e){n.resolve(i.keyOf(e))}).fail(n.reject),n.promise()},update:function(r,n){return i.handler(e,"update",{$global:t,$key:r,$data:n},"patch")},remove:function(r){return i.handler(e,"remove",{$global:t,$key:r},"delete")},totalCount:function(r){return i.handler(e,"totalCount",{$global:t,$options:r},"get")}});r.call(this,a),this._application=n}return __extends(n,r),n.prototype.eval=function(t,r){return t?e.Logic.Operation.eval(t,r):void 0},n.prototype.transformData=function(e,t){if(e)switch(t){case"get":$.each(e,function(t,r){r?r instanceof Date?e[t]=r.toISOString():e[t]=""+r:delete e[t]});break;case"post":case"patch":e=JSON.stringify(e)}return e},n.prototype.handler=function(r,n,i,o){function a(e,r,n,i,o){var a={url:e,type:r?r.toUpperCase():"GET",contentType:"application/json; charset=utf-8",dataType:i||"json",data:n};t.Utils.addHeaders(o)(a);var s=$.Deferred();return $.ajax(a).then(function(e){return s.resolve(e)}).fail(function(e){e.statusText=t.Utils.getResponseError(e),s.reject(e)}),s.promise()}var s,l,u,c=this,p=r[n];if(!p||!p.urlExpr)return e.Logic.rejectPromise("No "+n+" url specified");if(s=this.getUrl(p,i),l=p.method||o,p.getAjaxData){var f=p.getAjaxData,d=$.Deferred();return this._application.createFunctionCompiler(f).run(i).done(function(e){var t=c.transformData(c.eval(JSON.stringify(e),i),l);a(s,l,t,p.dataType,r.headers).done(function(e){d.resolve(e)}).fail(d.reject)}).fail(d.reject),d.promise()}return u={},a(s,l,u,p.dataType,r.headers)},n.prototype.getUrl=function(e,t){try{return this.eval(e.debugUrlExpr||e.urlExpr,t)}catch(r){throw console.error(r),r}},n}(DevExpress.data.CustomStore);t.RestStore=r}(t=e.Stores||(e.Stores={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(e){"use strict";var t=DevExpress.data,r=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.byKey=function(t,r){return e.prototype.byKey.call(this,t,r).then(function(e){return e instanceof Object?$.extend({},e):e})},t.prototype.load=function(t){return e.prototype.load.call(this,t).then(function(e){return e&&$.each(e,function(t,r){r instanceof Object&&(e[t]=$.extend({},r))}),e})},t}(t.ArrayStore);e.ArrayStore=r}(t=e.Stores||(e.Stores={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";function r(e){function t(e){if(e&&"object"==typeof e){if(-1!==r.indexOf(e))return!0;r.push(e);for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return console.log(e,"cycle at "+n),!0}return!1}var r=[];return t(e)}var n=DevExpress.Error,i=function(i){function o(a,s){var l=this;void 0===s&&(s=null);var u=a.jsonPath+a.url,c=function(e){var r=$.Deferred(),n={url:a.url,dataType:"json",data:{path:a.jsonPath}},i=o.cache[u];return t.Utils.addHeaders(a.headers)(n),i&&(n.headers={"If-None-Match":i.tag}),$.ajax(n).then(function(e,t,n){var a=e;200===n.status?o.cache[u]={data:e,tag:n.getResponseHeader("ETag")}:304===n.status&&(a=i.data),r.resolve(a)}),r.promise()},p=function(e,r,n){var i={url:a.url,data:{json:JSON.stringify(e),path:a.jsonPath,keyName:r,keyValue:n},method:"POST"};return t.Utils.addHeaders(a.headers)(i),$.ajax(i)},f=a.keyPrefix;f||(f=a.id,e.endsWith(f,"s")&&(f=f.substring(0,f.length-1))),$.extend(a,{totalCount:function(){return c().then(function(t){return e.Logic.trivialPromise(t?t.length:0)})},load:c,byKey:function(t){var r=l;return c().then(function(n){return e.findInArray(n,function(e){return e[r.key()]===t})})},update:function(e,t){var n=$.Deferred();return r(t),p(t,l.key(),e).then(function(){n.resolve()}),n.promise()},insert:function(t){var r,i=l,o=l.key(),u=$.Deferred();return $.getJSON(a.url).then(function(c){var d,h=e.compileGetter(a.jsonPath),v=h(c);if(v||(v=[],(d=e.compileSetter(a.jsonPath))(c,v)),o)if(r=l.keyOf(t),!r||"object"==typeof r&&$.isEmptyObject(r)){if($.isArray(o))return void u.reject(n("E4007"));var m=0;v.forEach(function(t){var r=l.keyOf(t);if(e.startsWith(r,f))try{var n=parseInt(r.substr(f.length),10);n>m&&(m=n)}catch(i){return}}),r=t[o]=f+(m+1);var y={$key:r,$global:s};(a.fields||[]).forEach(function(r){if(!t[r.name]&&"string"==typeof r.defaultValueExpr){var n=e.Logic.Operation.eval(r.defaultValueExpr,y);t[r.name]=n}})}else e.findInArray(v,function(e){return e.id===r})&&u.reject(n("E4008"));else r=t;v.push(t),p(t,i.key(),r).then(function(){u.resolve(r)},function(e){u.reject(e)})}),u.promise()},remove:function(t){var r=l,n=$.Deferred(),i=a.url,o=a.key;return $.getJSON(i).then(function(i){var s=e.compileGetter(a.jsonPath),l=s(i)||[],u=e.indexInArray(l,function(e){return e[o]===t});-1!==u&&l.splice(u,1),p(null,r.key(),t).then(function(){n.resolve()},function(e){n.reject(e)})},function(e){n.reject(e)}),n.promise()}}),i.call(this,a)}return __extends(o,i),o.cache={},o}(DevExpress.data.CustomStore);t.JsonStore=i}(t=e.Stores||(e.Stores={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){"use strict";var t=DevExpress.framework.html,r=DevExpress.data,n=e.Stores,i=DevExpress.utils.console,o=function(){function o(t,r){var n=this;if(this.sharedObjects={},this.started=$.Callbacks(),this.dataError=$.Callbacks(),this.setAppConfig(t),this.id=t.id,this.localStorage=new e.LocalStorageWrapper(this),this.options=r,this.ns={},this.appConfig.navigation=t.navigation||{defaultView:"",items:[]},this.functions=this.createGlobalFunctions(),this.appConfig.params=this.appConfig.params||[],this.appConfig.model=this.appConfig.model||[],this.typeInfoRepository=new e.TypeInfoRepository(t.dataStores),this.model=e.Model.createAppModel(this.appConfig,this),this.setModelValueFromParameter(),this.loadNavigation(),this.copyGlobalCommands(),this.createStores(),e.Model.initializeDataSources(this.model,{$model:this.model,$global:this.model},this,this.stores,!1,this.appConfig.dataSources),this.model.hasOwnProperty("title")){var i,o=ko.computed(function(){return n.model.title});i="com.devexpress.Xenarius.Designer"===this.id?function(){o()?document.title=o()+" - Xenarius Admin":document.title="Xenarius Admin"}:function(){document.title=o()},o.subscribe(i),i()}}return Object.defineProperty(o,"SPLIT_NAV_VIEW_ID",{get:function(){return"splitNavigation"},enumerable:!0,configurable:!0}),Object.defineProperty(o,"SHARED_PARAMETER",{get:function(){return"xet-shared-object"},enumerable:!0,configurable:!0}),o.prototype.setAppConfig=function(e){this.appConfig=e,this.appConfig.platforms=this.appConfig.platforms||[{name:"DesktopRule",layout:"desktop",defaultCommandContainer:"header",defaultCommandLocation:"after",options:{generic:!0}},{name:"PhoneRule",layout:"slideout",defaultCommandContainer:"header",defaultCommandLocation:"after",options:{phone:!0}},{name:"TabletRule",layout:"split",defaultCommandContainer:"header",defaultCommandLocation:"after",options:{tablet:!0}}],this.appConfig.views=this.appConfig.views||[],this.appConfig.views.forEach(function(e){(e.commands||[]).forEach(function(t){t.id=e.id+"_"+t.id})})},o.prototype.isSplitLayout=function(){var t=DevExpress.devices.current(),r=e.LayoutHelper.tryGetCurrentPlatform(this.appConfig.platforms,t),n=r&&"split"===r.layout;return n},o.prototype.setModelValueFromParameter=function(){var t=this;this.appConfig.params.forEach(function(r){var n=e.getQueryVariable(r.name);n&&(t.model[r.name]=n)})},o.prototype.loadNavigation=function(){var e=this.appConfig.navigation;!this.appConfig.isDesignMode&&this.isSplitLayout()&&e&&!e.customSplitNavigation&&e.items&&e.items.length>0&&(this.appConfig.views.splice(0,0,this.getSplitNavigationView()),(this.appConfig.dataStores=this.appConfig.dataStores||[]).push(this.getNavigationItemsStore()))},o.prototype.copyGlobalCommands=function(){var e=this;if(this.appConfig.globalCommands&&this.appConfig.views){var t=this.isSplitLayout();this.appConfig.views.forEach(function(r){t&&"master"!==r.pane||(r.commands||(r.commands=[]),e.appConfig.globalCommands.forEach(function(e){r.commands.push($.extend({},e,{id:e.id+r.id}))}))})}},o.prototype.navigate=function(e,t){this.dxapp.navigate(e,t)},o.prototype.initializeDefaultView=function(t){var r=e.LayoutHelper.tryGetCurrentPlatform(this.appConfig.platforms,t),n=r&&"split"===r.layout,i=r&&r.defaultView?r.defaultView:this.appConfig.navigation.defaultView;if(!this.appConfig.isDesignMode&&n&&!r.defaultView){var o=e.findInArray(this.appConfig.views,function(e){return"master"===e.pane});o&&(i=o.id)}return i},o.prototype.run=function(){var t=this,n=this;r.errorHandler=this._dataErrorHandler.bind(this),DevExpress.devices.current({platform:"generic"});var i=DevExpress.devices.current();this.defaultView=this.initializeDefaultView(i),this.moduleLoader=new e.ModulesLoader(this,window.progressReporter);var o,a;o=this.htmlAppConfiguration(),a=e.LayoutHelper.createLayoutSet(this.appConfig.platforms,this.appConfig.isDesignMode,this.appConfig.views),o.layoutSet=a.layoutSet,this.dxapp=this._createApplication(o),this.dxapp._xetGetView=this._getView.bind(this),this.dxapp.on("resolveViewCacheKey",function(e){var t=e.routeData.view,r=n.appConfig.views.some(function(e){return e.id===t&&e.refreshWhenShown});r&&(e.key=t)}),this.dxapp._processRequestResultLockEnabled=!0,this.dxapp.on("resolveLayoutController",function(t){var r=e.LayoutHelper.tryGetViewSpecificLayoutController(t.viewInfo.viewName,a.viewSpecificLayouts);r&&(t.layoutController=r)});var s=function(){$(window).resize(),t.started.fire(t),t.dxapp.off("viewShown",s)};if(new e.Modules.Authorization(this.appConfig,this),this.dxapp.on("viewShown",s),this.dxapp.on("navigating",this._onNavigating.bind(this)),this.dxapp.router.register(":view/:parameters",{view:n.defaultView,parameters:""}),window.xetHandleOpenURL){var l=window.xetHandleOpenURL;this.functions.navigateToView(l.uri,l.params,!0)}else location.hash&&"#"!==location.hash?("#test-error"===location.hash&&(this.dxapp.bbb.ccc.ddd=100),this.navigate()):this.navigateToDefaultView()},o.prototype._createApplication=function(e){return new t.HtmlApplication(e)},o.prototype._dataErrorHandler=function(t){var r={error:t,handled:!1};this.dataError.fire(r),r.handled||e.Utils.showErrorDialog(r.error)},o.prototype._ensureView=function(e){if(this.ns[e])return $.Deferred().resolve().promise();var t=this._getView(e);return this.ns[e]=t.viewModel,this.dxapp.loadTemplates(t.viewMarkup)},o.prototype._getView=function(t){return new e.Views.View(this.appConfig.views.filter(function(e){return e.id===t})[0],this)},o.prototype.registerMissingTemplate=function(e){-1===$.inArray(e,o.missingTemplates)&&o.missingTemplates.push(e)},o.prototype.templateIsMissing=function(e){return-1!==$.inArray(e,o.missingTemplates)},o.prototype.getNavigationItemsStore=function(){return{id:"navigationItems",type:"array",array:this.htmlAppNavigation()}},o.prototype.getSplitNavigationView=function(){var e=this;return{id:o.SPLIT_NAV_VIEW_ID,title:this.appConfig.navigation&&this.appConfig.navigation.title?this.appConfig.navigation.title:"Menu",pane:"master",dataSources:[{id:"navigationItemsDatasource",store:"navigationItems"}],components:[{id:"navigationList",type:"list",dataSource:"$model.navigationItemsDatasource",itemComponents:[{id:"itemContainer",type:"container",horizontalAlign:"center",style:{paddingTop:"12px",paddingLeft:"12px",paddingBottom:"12px"},components:[{id:"navigationItemIcon",type:"icon",icon:"$data.icon",style:{"float":"left"}},{id:"navigationItem",type:"label",text:"$data.title",style:{fontSize:"16px","float":"left",marginLeft:"12px"}}]}],onItemClick:function(t){"function"==typeof t.$data.onExecute?t.$data.onExecute():e.functions.navigateToView(t.$data.onExecute.substr(1))}}]}},o.prototype.createGlobalFunctions=function(){var t,r=this,n={},a=0;return n.busy=function(){return a++,1===a&&(t=$("<div>").appendTo(DevExpress.viewPort()).addClass("dx-static").dxLoadPanel().data("dxLoadPanel"),t.option("onHidden",function(e){e.element.remove()}),t.show()),a},n.available=function(){return a--,0===a&&t.hide(),0>a&&(a=0),a},n.getBusyCounter=function(){return a},n.back=function(){return r.dxapp.back()},n.navigateToView=function(t,n,i){t||(t=r.defaultView);var a=r.appConfig.views.filter(function(e){return e.id===t})[0];if(a.params&&a.params.filter(function(t){return!e.Views.ViewModel.optional(t)}).length>0&&!n)console.error("NavigateToView '"+a.id+"'. View parameters not found.");else if(a.params){var s;a.params.forEach(function(t){if(!n||void 0===n[t.name])return void(e.Views.ViewModel.optional(t)||(s||(s=[]),s.push(t.name)));var i=n[t.name],a=r.typeInfoRepository.get(t.type);if(a&&a.kind===e.TYPES.STORE_TYPE){var l=r.stores[a.name];void 0!==i&&(t.shared&&(r.sharedObjects[t.name]=i),n[t.name]=l.keyOf(i))}else t.shared&&(r.sharedObjects[t.name]=i,n[t.name]=o.SHARED_PARAMETER)}),s&&console.error("NavigateToView '"+a.id+"'. Missing parameters: "+s.join(", "))}if(r.dxapp){var l=function(e){var n=r.dxapp&&r.dxapp.router?r.dxapp.router.parse(e.uri).view:e.uri;return n!==t?void console.error("Invalid navigation chaing"):(a.params.forEach(function(e){return delete r.sharedObjects[e.name]}),void r.dxapp.off("navigated",l))};r.dxapp.on("navigated",l)}var u=void 0;r.isSplitLayout()&&"master"===a.pane?u={root:!1}:(r.isNavigationItem(t)||r.isCrossPaneTransition(i,a.pane)||r.isAuthorizationView(t))&&(u={root:!0,target:"current"}),!n||$.isEmptyObject(n)?r.navigate({view:t},u):r.navigate({view:t,parameters:n},u)},n.load=function(e,t){return r.stores[e].load(t)},n.byKey=function(e,t,n){return r.stores[e].byKey(t,n)},n.keyOf=function(e,t){return r.stores[e].keyOf(t)},n.save=function(e,t,i){n.busy();var o=r.stores[t];i||(i=o.keyOf(e));var a=void 0===i?o.insert(e):o.update(i,e);return a.then(function(t,r){i||(e[o.key()]=r)}).always(n.available)},n.insert=function(e,t){return n.busy(),r.stores[t].insert(e).always(n.available)},n["delete"]=function(e,t){var i=r.stores[t],o=$.isPlainObject(e)?i.keyOf(e):e;return n.busy(),i.remove(o).always(n.available)},n.refresh=function(e){var t=r.stores[e];t.fireEvent("modified")},n.getDataStoreConfig=function(e){var t=r.appConfig.dataStores.filter(function(t){return t.id===e});if(0===t.length)throw"Data provider '"+e+"' is not found!";return t.length>1&&console.warn("Found %o data providers with id '%o'",t.length,e),t[0]},n.getDataStore=function(e){return r.stores[e]},n.log=function(e,t){var r=i.logger;r[e](t)},n.getCookie=function(e){for(var t=e.cookieName+"=",r=document.cookie.split(";"),n="",i=$.Deferred(),o=0;o<r.length;o++){for(var a=r[o];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t)){n=a.substring(t.length,a.length);break}}return i.resolve(n),i},n},o.prototype.isNavigationItem=function(t){return this.appConfig.navigation&&-1!==e.indexInArray(this.appConfig.navigation.items,function(e){return e.id===t})},o.prototype.isAuthorizationView=function(e){return this.appConfig.authorization&&this.appConfig.authorization.loginView===e},o.prototype.isCrossPaneTransition=function(e,t){return void 0===e&&(e="detail"),void 0===t&&(t="detail"),this.isSplitLayout()&&e!==t},o.prototype.processParameterLoadingError=function(e,t){var r=DevExpress.ui.dialog.custom({title:"Error",message:"Cannot load an '"+e+"' parameter with the '"+t+"' key.",buttons:[{text:"Go Back",onClick:this.functions.back}]});r.show()},o.prototype.createStores=function(){var t=this,i=this;this.stores||(this.stores={},(this.appConfig.dataStores||[]).forEach(function(o){var a=null,s=e.Model.createLinkedModel(o,{$global:t.model},{callerType:"data provider options",callerId:o.id});switch(s.errorHandler=function(e){e.initiatorId=s.id},o.type){case"odata":a=new n.ODataStore(s,i.stores);break;case"array":var l=s.array;e.transformISODates(l),a=new n.ArrayStore({data:l,key:s.key});break;case"json":a=new n.JsonStore(s,t.model);break;case"rest":a=new n.RestStore(s,t.model,t);break;case"local":var u=s.array,c=s.name,p=s.flushInterval,f=s.immediate;e.transformISODates(l),a=new r.LocalStore({data:u,key:s.key,name:c,immediate:f,flushInterval:p});break;default:console.error("Unknown store type '"+s.type+"'")}t.stores[s.id]=a}))},o.prototype.getCommandMapping=function(){var t=this,r={};return(this.appConfig.views||[]).forEach(function(n){e.LayoutHelper.fillCommandMapping(r,n.commands,t.appConfig.platforms,DevExpress.devices.current())}),r},o.prototype._onNavigating=function(e){var t=this,r=$.Deferred().resolve().promise(),n=e.uri.indexOf(o.SHARED_PARAMETER);if(!e.cancel){if(n>=0&&0===Object.keys(this.sharedObjects).length){var i=this._getDefaultViewConfig();i&&(e.uri=i.id)}var a=this.dxapp?this.dxapp.router.parse(e.uri).view:e.uri,s=this.appConfig.views.filter(function(e){return e.id===a})[0],l=s.modules||[],u=s.modulesToSkip||[],c=this.appConfig.modules||[],p=c.filter(function(e){return u.indexOf(e)<0}).concat(l);0===this.moduleLoader.getModulesToInit(p).length&&this.ns[a]||(e.cancel=!0,this.functions.busy(),r=this.moduleLoader.initModules(p).then(function(){var r=function(){return t.navigate(e.uri,e.options)};return t.ns[a]?void r():t._ensureView(a).then(r,function(e){console.error("Failed to load the '"+a+"' view template")})}).always(function(){return t.functions.available()}))}return r},o.prototype.createFunctionCompiler=function(t){return this.functions||console.error("Functions parameter is necessary for compiler"),new e.Logic.FunctionCompiler(this.functions,t)},o.prototype._getDefaultViewConfig=function(){var t=this,r=e.findInArray(this.appConfig.views,function(e){return e.id===t.defaultView});return r||(this.defaultView?e.Utils.showErrorDialog("Default view '"+this.defaultView+"' doesn't exist."):this.appConfig.views.length?(r=this.appConfig.views[0],this.appConfig.views.length>1&&e.Utils.showErrorDialog("You can specify app default view in the designer. Click the cogwheel button next to the app title, then change Navigation - Default View property.")):e.Utils.showErrorDialog("Your app doesn't have any views. Please create one in the designer.")),r},o.prototype.navigateToDefaultView=function(){var e=this._getDefaultViewConfig();e&&this.navigate({view:e.id},{target:"current"})},o.prototype.on=function(e,t){switch(e){case"started":this.started.add(t);break;case"dataError":this.dataError.add(t);break;default:this.dxapp.on(e,t)}},o.prototype.off=function(e,t){switch(e){case"started":this.started.remove(t);break;case"dataError":this.dataError.remove(t);break;default:this.dxapp.off(e,t)}},o.prototype.getNavigationItemTitle=function(t){var r,n,i=t.title;return i||(r=t.id,n=e.findInArray(this.appConfig.views,function(e){return e.id===r}),i=n?n.title:"View Not Found"),i},o.prototype.htmlAppNavigation=function(){var t=this;return this.appConfig.navigation.items.map(function(r){"string"==typeof r&&(r={id:r});var n,i=r.onExecute?t.createFunctionCompiler(r.onExecute):void 0;i&&(n=function(e){return i.run({$global:t.model,$model:void 0,$data:e,$value:void 0},{callerType:"navigation item",callerId:r.id})});var o=0,a=r.id||"item"+ ++o,s={id:a,onExecute:n||(t.appConfig.isDesignMode!==!0?"#"+(r.id||r):function(){}),title:t.getNavigationItemTitle(r),visible:"string"==typeof r.visible&&r.visible.length>0?e.wrapModelReference(r.visible,{$global:t.model},{callerType:"property of the "+a+" command",callerId:"visible"}):r.visible||!0};return $.isPlainObject(r)&&(s=$.extend({},r,s)),s})},o.prototype.htmlAppConfiguration=function(){var t={namespace:this.ns,navigation:this.htmlAppNavigation(),commandMapping:this.getCommandMapping()};return"desktop"===e.LayoutHelper.getDeviceType()&&(t.mode="webSite"),t},o.prototype.disposeOpenedView=function(){this.dxapp.viewCache.clear(),this.dxapp._disposeRemovedViews()},o.missingTemplates=[],o}();e.Application=o}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=$.Deferred();return r.resolve.apply(r,arguments).promise()}function n(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=$.Deferred();return r.reject.apply(r,arguments).promise()}function i(e){if(!e)return!1;var r=!1,n=function(e){return"Event"===e._type&&e.flow===t.Flow.Return?void(r=!0):void $.each(e,function(e,t){return r?!1:void(t&&($.isArray(t)||"object"==typeof t)&&n(t))})};return n(e),r}t.logEnabled=!1;var o=function(){function r(e,t){this.functions=e,this.calls=t}return r.prototype.run=function(i,o){var a,s=this,l=function(t){var n="";e.Utils.showErrorDialog(t),o&&o.callerType&&o.callerId&&(n="Error occurred when trying to evaluate the '"+o.callerId+"' "+o.callerType+":\r\n"),n+=t+"\r\n"+JSON.stringify(s.calls,null,2),r.consoleHandler(n)};t.logEnabled&&o&&(console.groupCollapsed("Run '"+o.callerId+" \"' "+o.callerType),console.log("Context: %o",i),console.log("Logic: %o",this.calls),console.groupEnd()),this.strategy||(this.strategy=this.createStrategy(this.functions,this.calls));try{var u=[];i&&$.each(i,function(e){u.push(e)}),a=this.strategy.run(i,u),a.fail(l)}catch(c){return l(c),n(c)}return a},r.prototype.createStrategy=function(e,t){if(t instanceof Function)return new s(e,t);if(!t||$.isEmptyObject(t))return new a(e);if("string"==typeof t)return c.isСompatible(t)?new c(e,t):new l(e,t);var r=t.logic||t;return new u(e,r)},r.consoleHandler=function(e){return console.error(e)},r}();t.FunctionCompiler=o;var a=function(){function e(e){this.functions=e}return e.prototype.run=function(e,t){return r()},e.prototype.compile=function(e,t,r){var n="with($functions){"+t+"}",i=["$functions"];[].push.apply(i,r);var o=new Function(i.join(", "),n);return function(t){var n=[e];return r.forEach(function(e){n.push(t[e])}),o.apply(o,n)}},e}(),s=function(e){function t(t,r){e.call(this,t),this.calls=r}return __extends(t,e),t.prototype.run=function(e,t){var n=this.calls(e);return n&&"function"==typeof n.always&&"function"==typeof n.done?n:r(n)},t}(a),l=function(e){function t(t,r){e.call(this,t),this.calls=r}return __extends(t,e),t.prototype.run=function(e,t){this.compiledFunctions||(this.compiledFunctions=this.compile(this.functions,this.calls,t));var n=this.compiledFunctions(e);return n&&"function"==typeof n.always&&"function"==typeof n.done?n:r(n)},t}(a),u=function(e){function n(t,r){e.call(this,t),this.calls=r}return __extends(n,e),n.prototype.getAllVariables=function(e,r){var n={};return r.forEach(function(e){n[e.name]=e}),$.each(e,function(e){n[e]||(n[e]=new t.Variable({name:e,value:null,parameter:!0,type:"object"}))}),n},n.prototype.run=function(e,n){if(!this.calls)return null;var i=[],o=[];this.calls.variables&&(i=this.calls.variables.map(function(e){return t.Variable.fromJson(e)})),this.calls.calls&&(o=this.calls.calls.map(function(e){return t.Operation.fromJson(e)}));var a=this.getAllVariables(e,i);Object.getOwnPropertyNames(a).forEach(function(t){var r=a[t];r.resetValue(),r.value=e&&r.parameter?e[r.name]:r.value,a[r.name]=r});var s=new p(a,this.functions);return t.Operation.run(o,s,this.functions).then(function(e){return e&&e.flow===t.Flow.Return?r(e.value):r()})},n}(a),c=function(e){function t(t,r){e.call(this,t,r)}return __extends(t,e),t.isСompatible=function(e){return/^\$(global|model)\.[\w\$]+$/.test(e)},t.prototype.compile=function(e,t,r){var n="return "+t+"($context);",i=["$context"];[].push.apply(i,r);var o=new Function(i.join(", "),n);return function(e){var t=[e];return r.forEach(function(r){t.push(e[r])}),o.apply(o,t)}},t}(l),p=function(){function r(e,r){this.variables=e,e.$functions=e.$functions||new t.Variable({name:"$functions",value:r||{}})}return r.prototype.add=function(e,r){this.variables[e]=new t.Variable({name:e,value:r})},r.prototype.get=function(e){return this.variables[e]},r.prototype.isDefined=function(e){if("string"!=typeof e||!e.length)return!1;var t=this.getVariableName(e);return!!this.variables[t]},r.prototype.getValue=function(e){if("string"!=typeof e||!e.length)return e;var t=this.compileGetter(e);return t()},r.prototype.getValueOrDefault=function(e,t){try{return this.getValue(e)}catch(r){return t}},r.prototype.setValue=function(e,t){if("string"==typeof e&&e.length){var r=this.evalPath(e),n=this.compileSetter(r);n(t)}},r.prototype.clone=function(){return new r($.extend({},this.variables))},r.prototype.getContext=function(e){void 0===e&&(e=!1);var t={};return $.each(this.variables,function(r,n){e&&0!==r.indexOf("$")||(t[r]=n.value)}),t},r.prototype.compileGetter=function(e){var t=this;if(this.variables[e])return function(){return t.variables[e].value};var r=[];$.each(this.variables,function(e,t){r.push(t.name)}),r.push("with($functions) { return ("+e+"); }");var n=Function.apply(null,r);return function(){var e=r.slice(0,r.length-1).map(function(e){return t.variables[e].value});return n.apply(null,e)}},r.prototype.evalPath=function(e){for(var t,r,n=e.indexOf("["),i=n>0?e.substr(0,n):e;n>0;)t=e.indexOf("]",n),r=e.substring(n+1,t).trim(),i+="."+this.getValue(r),n=e.indexOf("[",t),i+=e.substring(t+1,n>0?n:void 0);return i},r.prototype.compileSetter=function(t){var r=this;if(this.variables[t])return function(e){return r.variables[t].value=e};var n=this.getVariableName(t),i=t.substr(n.length+1);if(!this.variables[n])throw new Error("Variable: "+n+" is not defined");var o=e.compileSetter(i);return function(e){return o(r.variables[n].value,e)}},r.prototype.getVariableName=function(e){var t=e.indexOf(".");t=-1===t?e.length:t;var r=e.indexOf("[");r=-1===r?e.length:r;var n=Math.min(t,r),i=e.substring(0,n);return i},r}();t.VariableStore=p,t.trivialPromise=r,t.rejectPromise=n,t.returnsValue=i}(t=e.Logic||(e.Logic={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";var r=(function(){function e(){}return e}(),function(){function t(t,r){var n=this;if(this.locations=[],this.loginView="",this.allowAnonymous=!0,this.app=r,t.authorization){var i=t.authorization;this.loginView=i.loginView,this.allowAnonymous=i.allowAnonymous,(i.locations||[]).forEach(function(e){var t=e.allowAnonymous;"string"==typeof t&&(t="true"===t.toLowerCase()),n.locations.push({view:e.view,allowAnonymous:t})})}r.functions.logout=function(){n.logout()},r.on("dataError",function(e){401!==e.error.httpStatus&&401!==e.error.status&&"Unauthorized"!==e.error.message||(e.handled=!0,n.logout())}),this.onNavigating=function(t){n.canNavigate(t.uri)||(t.cancel=!0,n.loginView?setTimeout(function(){r.navigate({view:n.loginView},{root:!0})}):e.Utils.showErrorDialog("Login view is not specified and anonymous access is disabled"))},this.app.on("navigating",this.onNavigating)}return Object.defineProperty(t.prototype,"authenticated",{get:function(){return!!this.app.model.authenticated},enumerable:!0,configurable:!0}),t.prototype.canNavigate=function(e){if(this.authenticated||e===this.loginView||e===encodeURIComponent(this.loginView))return!0;var t=this.locations.filter(function(t){return 0===e.indexOf(t.view)});return t.length?t[0].allowAnonymous:this.allowAnonymous},t.prototype.logout=function(){this.app.disposeOpenedView(),this.app.model.authenticated=!1,this.loginView?this.app.navigate({view:this.loginView},{root:!0}):e.Utils.showErrorDialog("Login view is not specified")},t}());t.Authorization=r}(t=e.Modules||(e.Modules={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){"use strict";var t=DevExpress.ui,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._processDataSourceChanging=function(){this._setListDataSource(),this._renderValue()},t}(t.dxSelectBox);e.XetSelectBox=r,DevExpress.registerComponent("xetSelectBox",r)}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){"use strict";ko.bindingHandlers.dxOptions={update:function(e,t){var r=ko.utils.unwrapObservable(t()||{});$.each(r,function(t,r){r=ko.unwrap(r)||0,e["data-options"]=t+r})}},ko.bindingHandlers.dxPartialView={init:function(e,t,r,n,i){$(e).append($("#xet-view").text())}},ko.bindingHandlers.themeCustomizer={init:function(e,t,r,n,i){ko.computed(function(){var e="dynamic-styles",r=t().theme;r&&($("#"+e).remove(),$("<style>"+r+"</style>").attr("type","text/css").attr("id",e).appendTo("head"),DevExpress.ui.themes.current({_autoInit:!0}))})}},ko.bindingHandlers.xetScrollViewResetter={init:function(e,t,r,n,i){t().reset=function(){$(e).find(".dx-scrollview").each(function(e,t){var r=$(t).dxScrollView("instance");r.update(),r.scrollTo(0)})}}},ko.bindingHandlers["debugger"]={update:function(e,t,r,n,i){ko.unwrap(t().track)}}}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){"use strict";var t=DevExpress.framework.html,r=DevExpress,n=function(){function e(){}return e.tryGetCurrentPlatform=function(e,t){t=t||r.devices.current();var n=DevExpress.utils.findBestMatches(t,(e||[]).map(function(e,t){return $.extend({platformIndex:t},e.options)}));return n.length?e[n[0].platformIndex]:void 0},e.getLayoutController=function(e,n){var i,o={navbar:"NavBarController",slideout:"SlideOutController",split:"IOSSplitLayoutController",simple:"SimpleLayoutController",empty:"EmptyLayoutController",popup:"PopupLayoutController",designer:"DesignerController"},a=o[e.layout];return"split"===e.layout&&e.options.generic&&(a="GenericSplitLayoutController"),
i=a&&r.framework.html[a]?new r.framework.html[a]({swipeEnabled:!n}):new t.DefaultLayoutController({name:"desktop",swipeEnabled:!n}),n&&i instanceof DevExpress.framework.html.SlideOutController&&(i._toggleNavigation=function(){}),i},e.createLayoutSet=function(r,n,i){var o={layoutSet:[],viewSpecificLayouts:[]};return r.forEach(function(t){o.layoutSet.push($.extend({controller:e.getLayoutController(t,n)},t.options||{}))}),i&&i.forEach(function(r){r.platforms&&r.platforms.forEach(function(i){var a=e.getLayoutController(i,n);i&&i.modal&&(a=new t.PopupLayoutController({childController:a})),o.layoutSet.push($.extend({customResolveRequired:!0,controller:a},i.options||{})),o.viewSpecificLayouts.push({view:r.id,options:i.options,controller:a})})}),o},e.tryGetViewSpecificLayoutController=function(e,t){var r;if(t.length>0)for(var n=0;n<t.length;++n){var i=t[n],o=!0,a=DevExpress.devices.current();if(i.view===e&&(i.options&&$.each(i.options,function(e,t){return a[e]!==t?o=!1:void 0}),o)){r=i.controller;break}}return r},e.getDeviceType=function(e){var t="phone";return e=e||DevExpress.devices.current(),e.tablet||e.phone?e.tablet&&(t="tablet"):t="desktop",t},e.linkTarget=function(){return"desktop"===e.getDeviceType()?"_blank":"_system"},e.fillCommandMapping=function(t,r,n,i){var o=this.getDeviceType(i),a=e.tryGetCurrentPlatform(n,i),s={header:["ios-header-toolbar","generic-header-toolbar","desktop-toolbar"],footer:["ios-view-footer","generic-view-footer"],toolbar:["generic-layout-toolbar"],none:[]};return(r||[]).forEach(function(e){var r=e.container?e.container[o]:null;r||(r=a&&a.defaultCommandContainer||"header");var n={id:e.id},i=s[r];return e.alignment&&e.alignment.hasOwnProperty(o)?n.location=e.alignment[o]:n.location=a&&a.defaultCommandLocation||"after",i?void i.forEach(function(e){t[e]?t[e].commands.push(n):t[e]={commands:[n]}}):void console.error("Unknown command container '"+r+"'. Supported values are: header, footer, toolbar")}),t},e}();e.LayoutHelper=n}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){"use strict";var t=function(){function t(){}return t.createAppModel=function(e,r){var n={},i={$global:n};return t.createModelCore(e,r,i,"global ",n)},t.createModel=function(e,r,n){var i={},o={$global:r.model,$model:i};return t.createModelCore(e,r,o,"",i,n)},t.createPlainPropertyDescriptor=function(r,n){var i=n.app,o=n.modelId,a=!1,s=r.type&&i.typeInfoRepository.get(r.type),l=s&&s.kind===e.TYPES.ARRAY_TYPE,u=s&&s.kind!==e.TYPES.STORE_TYPE?s.defaultValueCtor():42,c=l?ko.observableArray(u):ko.observable(u),p=function(){return c()},f=t.getObservableSetter(c.peek(),l,c,"",r.observables);if(c.subscribe(function(e){a&&r.persistent&&i.localStorage.put(o,r.name,e)}),void 0!==r.defaultValue&&f(e.clone(r.defaultValue)),a=!0,r.persistent){var d=i.localStorage.get(o,r.name);"undefined"!=typeof d&&f(d)}return{modelProperty:r,propertyDescriptor:{enumerable:!0,configurable:!0,get:p,set:f}}},t.createCalculatedPropertyDescriptor=function(e,t){var r=this,n=t.context,i=t.callerPrefix,o=t.app,a=ko.observable(),s={callerType:i+"model property",callerId:e.name},l=ko.computed(function(){o.createFunctionCompiler(e.getter).run($.extend({},n),s).then(function(t){var n=r.setObservableProperties(a(),t,name,e.observables);a(n)})},null,{deferEvaluation:!0}),u={enumerable:!0,configurable:!0,get:function(){return l(),ko.unwrap(a())}};return e.setter&&(u.set=function(t){var i=a();if(i!==t){if(ko.isObservable(i))return void console.error("Property cannot have a setter if getter returns observable.");o.createFunctionCompiler(e.setter).run($.extend({$value:t},n));var s=r.setObservableProperties(a(),t,name,e.observables);a(s)}}),{modelProperty:e,propertyDescriptor:u,computed:l}},t.createFunctionPropertyDescriptor=function(e,t){var r=t.app,n=t.context,i=t.callerPrefix,o={callerType:i+"function",callerId:e.name},a=function(t){return r.createFunctionCompiler(e["function"]).run($.extend({},n,t),o)};return{modelProperty:e,propertyDescriptor:{enumerable:!0,configurable:!0,value:a}}},t.createPropertyDescriptor=function(e){var t=e.item;return t.getter||t.setter?this.createCalculatedPropertyDescriptor(t,e):t["function"]?this.createFunctionPropertyDescriptor(t,e):this.createPlainPropertyDescriptor(t,e)},t.createModelCore=function(e,t,r,n,i,o){var a=this,s=[e.params,e.model,e.functions].reduce(function(e,t){return t&&e.push.apply(e,t),e},[]),l=s.map(function(i){return a.createPropertyDescriptor({item:i,app:t,callerPrefix:n,context:r,modelId:e.id})});o&&o(l),this.onCustomizeProperties&&this.onCustomizeProperties(l);var u=l.filter(function(e){return!!e.computed}).map(function(e){return e.computed});i.dispose=function(){u&&(u.forEach(function(e){return e.dispose()}),u=null)};var c=l.reduce(function(e,t){return e[t.modelProperty.name]=t.propertyDescriptor,e},{});return Object.defineProperties(i,c),i},t.createLinkedModel=function(t,r,n){return e.propertyVisitor(t,function(t){if(e.endsWith(t.name,"Expr"))return t.value;var i=t.value;if(i&&"string"==typeof i&&"$"===i.charAt(0)){var o,a=t.owner,s=t.name,l=e.getModelValue(i,r,n);return"function"==typeof l?t.value:void(t.isArray?o=ko.computed(function(){return a[s]=e.getModelValue(i,r,n)}):(o=ko.computed(function(){return e.getModelValue(i,r,n)}),Object.defineProperty(a,s,{enumerable:!0,configurable:!0,get:function(){return o()}})))}return t.value})},t.processArrayMethodArguments=function(e,t,r,n){var i=[];switch(t){case"push":case"unshift":for(var o=0;o<e.length;++o)i.push(this.setObservableProperties(void 0,e[o],r,n));break;case"splice":i.push(e[0]),i.push(e[1]);for(var o=2;o<e.length;o++)i.push(this.setObservableProperties(void 0,e[o],r,n));break;case"fill":i.push(this.setObservableProperties(void 0,e[0],r,n));for(var o=1;o<e.length;++o)i.push(e[o]);break;case"sort":e.length&&i.push(e[0])}return i},t.getObservableSetter=function(e,t,r,n,i){var o=this;return t&&ko.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift","fill"],function(t){var a=e[t];a&&(e[t]=function(){for(var s=[],l=0;l<arguments.length;l++)s[l-0]=arguments[l];var u=o.processArrayMethodArguments(s,t,n,i),c=a.apply(e,u||s);return r.valueHasMutated(),c})}),function(e){t&&$.isArray(e)&&$.isArray(r.peek())?r.splice.apply(r,[0,r.peek().length].concat(e)):r(o.setObservableProperties(r(),e,n,i))}},t.getObservableDescriptor=function(e,r,n){var i=$.isArray(e),o=i?ko.observableArray(e):ko.observable(e);return{enumerable:!0,configurable:!0,get:function(){return o()},set:t.getObservableSetter(e,i,o,r,n)}},t.getPlainDescriptor=function(e,t,r){var n=this,i=e;return{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=n.setObservableProperties(i,e,t,r)}}},t.getDescriptor=function(e,t,r){var n=t.split("."),i="*",o=(r||[]).some(function(e){var t=e.split("."),r=!0;if(t.length<n.length)r=t[t.length-1]===i;else if(n.length<t.length)r=!1;else for(var o=0;o<n.length&&t[o]!==i;++o)if(n[o]!==t[o]){r=!1;break}return r});return o?this.getObservableDescriptor(e,t,r):this.getPlainDescriptor(e,t,r)},t.processArray=function(e,t,r,n){var i=this,o=[];return $.each(t,function(t,a){o.push(i.setObservableProperties(e?ko.unwrap(e)[t]:void 0,a,r,n))}),o},t.setObservableProperties=function(e,t,r,n){var i=this;if(!n||0===n.length)return t;if($.isArray(t))return this.processArray(e,t,r,n);if($.isPlainObject(t)){var o=$.isPlainObject(e)?e:{};$.each(o,function(e,r){void 0===t[e]&&delete o[e]});var a={};return $.each(t,function(e,t){if(void 0===o[e]){var s=""===r?e:r+"."+e,l=i.setObservableProperties(o[e],t,s,n);a[e]=i.getDescriptor(l,s,n)}else o[e]=t}),Object.defineProperties(o,a),o}return t},t.initializeDataSources=function(t,r,n,i,o,a){var s=this,l={};(a||[]).forEach(function(a){var u=e.Data.DataSource.createDataSource(a,r,i,n);o&&(t[a.id].dispose(),t[a.id]=new DevExpress.data.DataSource([{}]),t[a.id].load().then(function(){t[a.id].dispose(),t[a.id]=u})),l[a.id]=s.getDescriptor(u,a.id,[a.id])}),o||Object.defineProperties(t,l)},t}();e.Model=t}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){"use strict";var t=function(){function t(){}return t.decorate=function(e,t,r,n){var i,o=this,a=function(e){r.isCalculating&&n.unshift(e)},s=function(e){var t=n[0]||"NonInspected",r=o.modelTrace[t]||[];o.modelTrace[t]=r.concat(e)},l=function(e){if(void 0===e&&(e=!0),r.isCalculating){var t=o.modelTrace[n[0]];n.shift(),s(t)}},u=e[r.property];e[r.property]=function(e){return a(t),r.isCalculating||s([t]),i=u(e),l(),i}},t.init=function(){var t=this;this.modelTrace={},e.Model.onCustomizeProperties=function(e){var r=[];e.forEach(function(e){var n=e.modelProperty["function"]?"value":"get",i={property:n,isCalculating:!!e.modelProperty["function"]||!!e.modelProperty.getter};t.decorate(e.propertyDescriptor,e.modelProperty.name,i,r)})}},t.cancel=function(){this.modelTrace=void 0,e.Model.onCustomizeProperties=void 0},t.revertTrace=function(e){void 0===e&&(e=!0);var t={};return $.each(this.modelTrace,function(r,n){n.forEach(function(n){t[n]=t[n]||[],(e||"NonInspected"!==r)&&t[n].push(r)})}),t},t}();e.ModelTracer=t}(AppPlayer||(AppPlayer={})),/*! LAB.js (LABjs :: Loading And Blocking JavaScript)
   v2.0.3 (c) Kyle Simpson
   MIT License
   >> modified to support Apache Cordova for Windows Phone
*/
function(e){function t(e){return"[object Function]"==Object.prototype.toString.call(e)}function r(e){return"[object Array]"==Object.prototype.toString.call(e)}function n(e,t){var r=/^\w+\:\/\//;return/^\/\/\/?/.test(e)?e=location.protocol+e:r.test(e)||"/"==e.charAt(0)||(e=(t||"")+e),r.test(e)?e:("/"==e.charAt(0)?y:m)+e}function i(e,t){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function o(e){for(var t=!1,r=0;r<e.scripts.length;r++)e.scripts[r].ready&&e.scripts[r].exec_trigger&&(t=!0,e.scripts[r].exec_trigger(),e.scripts[r].exec_trigger=null);return t}function a(e,t,r,n){e.onload=e.onreadystatechange=function(){e.readyState&&"complete"!=e.readyState&&"loaded"!=e.readyState||t[r]||(e.onload=e.onreadystatechange=null,n())}}function s(e){e.ready=e.finished=!0;for(var t=0;t<e.finished_listeners.length;t++)e.finished_listeners[t]();e.ready_listeners=[],e.finished_listeners=[]}function l(e,t,r,n,i){setTimeout(function(){var o,s,l=t.real_src;if("item"in g){if(!g[0])return void setTimeout(arguments.callee,25);g=g[0]}o=document.createElement("script"),t.type&&(o.type=t.type),t.charset&&(o.charset=t.charset),i?E?(r.elem=o,w?(o.preload=!0,o.onpreload=n):o.onreadystatechange=function(){"loaded"==o.readyState&&n()},o.src=l):i&&0==l.indexOf(y)&&e[p]?(s=new XMLHttpRequest,s.onreadystatechange=function(){4==s.readyState&&(s.onreadystatechange=function(){},r.text=s.responseText+"\n//@ sourceURL="+l,n())},s.open("GET",l),s.send()):(o.type="text/cache-script",a(o,r,"ready",function(){g.removeChild(o),n()}),o.src=l,g.insertBefore(o,g.firstChild)):C?(o.async=!1,a(o,r,"finished",n),o.src=l,g.insertBefore(o,g.firstChild)):(a(o,r,"finished",n),o.src=l,g.insertBefore(o,g.firstChild))},0)}function u(){function m(e,t,r){function n(){null!=i&&(i=null,s(r))}var i;S[t.src].finished||(e[d]||(S[t.src].finished=!0),i=r.elem||document.createElement("script"),t.type&&(i.type=t.type),t.charset&&(i.charset=t.charset),a(i,r,"finished",n),r.elem?r.elem=null:r.text?(i.onload=i.onreadystatechange=null,i.text=r.text):i.src=t.real_src,g.insertBefore(i,g.firstChild),r.text&&n())}function y(e,t,r,i){var o,a,u=function(){t.ready_cb(t,function(){m(e,t,o)})},c=function(){t.finished_cb(t,r)};t.src=n(t.src,e[v]),t.real_src=t.src+(e[h]?(/\?.*$/.test(t.src)?"&_":"?_")+~~(1e9*Math.random())+"=":""),S[t.src]||(S[t.src]={items:[],finished:!1}),a=S[t.src].items,e[d]||0==a.length?(o=a[a.length]={ready:!1,finished:!1,ready_listeners:[u],finished_listeners:[c]},l(e,t,o,i?function(){o.ready=!0;for(var e=0;e<o.ready_listeners.length;e++)o.ready_listeners[e]();o.ready_listeners=[]}:function(){s(o)},i)):(o=a[0],o.finished?c():o.finished_listeners.push(c))}function b(){function e(e,t){e.ready=!0,e.exec_trigger=t,a()}function n(e,t){e.ready=e.finished=!0,e.exec_trigger=null;for(var r=0;r<t.scripts.length;r++)if(!t.scripts[r].finished)return;t.finished=!0,a()}function a(){for(;d<p.length;)if(t(p[d]))try{p[d++]()}catch(e){}else{if(!p[d].finished){if(o(p[d]))continue;break}d++}d==p.length&&(h=!1,u=!1)}function s(){u&&u.scripts||p.push(u={scripts:[],finished:!0})}var l,u,c=i(w,{}),p=[],d=0,h=!1;return l={script:function(){for(var o=0;o<arguments.length;o++)!function(o,a){var p;r(o)||(a=[o]);for(var d=0;d<a.length;d++)s(),o=a[d],t(o)&&(o=o()),o&&(r(o)?(p=[].slice.call(o),p.unshift(d,1),[].splice.apply(a,p),d--):("string"==typeof o&&(o={src:o}),o=i(o,{ready:!1,ready_cb:e,finished:!1,finished_cb:n}),u.finished=!1,u.scripts.push(o),y(c,o,u,C&&h),h=!0,c[f]&&l.wait()))}(arguments[o],arguments[o]);return l},wait:function(){if(arguments.length>0){for(var e=0;e<arguments.length;e++)p.push(arguments[e]);u=p[p.length-1]}else u=!1;return a(),l}},{script:l.script,wait:l.wait,setOptions:function(e){return i(e,c),l}}}var x,w={},C=E||P,V=[],S={};return w[p]=!0,w[f]=!1,w[d]=!1,w[h]=!1,w[v]="",x={setGlobalDefaults:function(e){return i(e,w),x},setOptions:function(){return b().setOptions.apply(null,arguments)},script:function(){return b().script.apply(null,arguments)},wait:function(){return b().wait.apply(null,arguments)},queueScript:function(){return V[V.length]={type:"script",args:[].slice.call(arguments)},x},queueWait:function(){return V[V.length]={type:"wait",args:[].slice.call(arguments)},x},runQueue:function(){for(var e,t=x,r=V.length,n=r;--n>=0;)e=V.shift(),t=t[e.type].apply(null,e.args);return t},noConflict:function(){return e.$LAB=c,x},sandbox:function(){return u()}}}var c=e.$LAB,p="UseLocalXHR",f="AlwaysPreserveOrder",d="AllowDuplicates",h="CacheBust",v="BasePath",m=/^[^?#]*\//.exec(location.href)[0],y=/^\w+[\w|\-]\w+\:\/\/\/?[^\/]+/.exec(m)[0],g=document.head||document.getElementsByTagName("head"),b=e.opera&&"[object Opera]"==Object.prototype.toString.call(e.opera)||"MozAppearance"in document.documentElement.style,x=document.createElement("script"),w="boolean"==typeof x.preload,E=w||x.readyState&&"uninitialized"==x.readyState,C=!E&&x.async===!0,P=!E&&!C&&!b;e.$LAB=u(),function(e,t,r){null==document.readyState&&document[e]&&(document.readyState="loading",document[e](t,r=function(){document.removeEventListener(t,r,!1),document.readyState="complete"},!1))}("addEventListener","DOMContentLoaded")}(this);/**
 * (c) http://www.xenarius.net - Mobile applications for your data, built without coding.
 */
var Bootstrapper;!function(e){"use strict";var t=function(){function e(){this.callbacks=[],this.isResolved=!1}return e.prototype.resolve=function(){this.isResolved=!0,this.callbacks.forEach(function(e){e()})},e.prototype.done=function(e){this.isResolved?e():this.callbacks.push(e)},e}();e.SimpleDeferred=t;var r=function(){function e(e,t,r){void 0===e&&(e=0),void 0===t&&(t=function(e){}),void 0===r&&(r=function(){}),this.approximateCount=e,this.onProgress=t,this.onTotalComplete=r,this.completedCount=0,this.realCount=0,this.totalCount=0,this.totalCount=e}return e.prototype.enqueue=function(e){void 0===e&&(e=1),this.realCount+=e,this.realCount>this.totalCount&&(this.totalCount=this.realCount,this.update())},e.prototype.report=function(e){void 0===e&&(e=1),this.completedCount+=e,this.update()},e.prototype.clear=function(){this.realCount=this.completedCount=this.totalCount=0},e.prototype.getCurrentProgress=function(){return 100*this.completedCount/this.totalCount},e.prototype.areTotalCompleted=function(){return this.completedCount===this.totalCount},e.prototype.update=function(){this.onProgress(this.getCurrentProgress()),this.areTotalCompleted()&&this.onTotalComplete()},e}();e.TaskProgressReporter=r;var n=function(){function n(e){void 0===e&&(e=new r),this.progressReporter=e,this.lab=window.$LAB}return n.prototype.get=function(e,t,r){if("undefined"!=typeof $&&$.get)$.get(e).then(t,r);else{var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400||0===this.status?t(this.responseText):r())},n.send()}},n.prototype.initHtmlElement=function(e,t){e.setAttribute("type","text/html"),t.id&&e.setAttribute("id",t.id),t.rel&&e.setAttribute("rel",t.rel)},n.prototype.appendHtml=function(e,t){var r=document.createElement("div");for(r.innerHTML=t;r.children.length;){var n=r.children[0];e.appendChild(n)}},n.prototype.normalize=function(e,t){var r=this;return(e||[]).map(function(e){var n="string"==typeof e?{src:e,fileType:null,id:null}:e,i=0===n.src.indexOf("http")?n.src:t+("/"+n.src).replace("//","/");return n.src=r.insertFingerprint(i),n.fileType=n.fileType||n.src.split(".").pop().toLocaleLowerCase(),n})},n.prototype.bootstrapResource=function(e,t){var r=this;void 0===t&&(t=function(){});var n,i=function(){console.error("Could not load file: "+e.src)};if("html"===e.fileType)"dx-template"===e.rel?(n=document.createElement("link"),n.href=e.src,this.initHtmlElement(n,e),document.head.appendChild(n),t()):this.get(e.src,function(n){if(-1!==n.indexOf("type='text/html'")||-1!==n.indexOf('type="text/html"'))if(e.rel){var i=document.createElement("div");i.style.display="none",i.innerHTML=n,document.body.appendChild(i)}else r.appendHtml(document.body,n);else{var o=document.createElement("script");o.text=n,r.initHtmlElement(o,e),document.body.appendChild(o)}t()},i);else if("js"===e.fileType)this.lab=this.lab.script(e.src).wait(t);else{if("css"!==e.fileType)return void console.error("Unsupported file type: %o",e);n=document.createElement("link"),n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e.src),n.onload=t,n.onerror=i,document.head.appendChild(n)}},n.prototype.insertFingerprint=function(t){if(e.resourceFingerprint){var r=t.lastIndexOf(".");return t.substring(0,r)+e.resourceFingerprint+t.substring(r)}return t},n.prototype.bootstrap=function(e,r){var n=this;void 0===r&&(r="");var i=new t,o=e.length;return this.progressReporter.enqueue(o),this.normalize(e,r).forEach(function(e){n.bootstrapResource(e,function(){n.progressReporter.report(),--o||i.resolve()})}),i},n}();e.Bootstrapper=n}(Bootstrapper||(Bootstrapper={}));var AppPlayer;!function(e){"use strict";var t=function(){function e(e){this._application=e}return e}();e.ModuleBase=t;var r=function(t){function r(e,r){t.call(this,r),this._application=e,this.alreadyLoadedModules=[]}return __extends(r,t),r.prototype._initModule=function(t,r){var n=this,i=e.compileGetter(t)(window);i&&(i.functions&&this._application&&i.functions.forEach(function(e){n._application.functions[e.id]=e.func}),i.createModule&&i.createModule(this._application))},r.prototype._loadModule=function(e,t){var r=this,n=$.Deferred();return this.bootstrap(t.files,e).done(function(){r._initModule(t.namespace,e),n.resolve()}),n},r.prototype.initModules=function(e){var t=this,n=$.Deferred();if(e){var i=this.getModulesToInit(e).map(function(e){var n=$.Deferred(),i=e.src||e;return t.alreadyLoadedModules.push(i),$.getJSON(i+"/"+t.insertFingerprint(r.MODULEFILENAME)).done(function(e){t._loadModule(i,e).done(function(){n.resolve()})}).fail(function(e){var r=t.alreadyLoadedModules.indexOf(i);t.alreadyLoadedModules.splice(r),n.reject(e)}),n});$.when.apply($,i).done(function(){n.resolve()})}else n.resolve();return n.promise()},r.prototype.getModulesToInit=function(e){var t=this;return e.filter(function(e){return e&&-1===t.alreadyLoadedModules.indexOf(e.src||e)})},r.MODULEFILENAME="module.json",r}(Bootstrapper.Bootstrapper);e.ModulesLoader=r}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(e){var t;!function(e){"use strict";function t(e){return"string"==typeof e||e instanceof String}e.isString=t}(t=e.Cast||(e.Cast={}))}(t=e.Utils||(e.Utils={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(e){"use strict";function t(r){if(void 0!==r){var n=e.Cast.isString(r),i=function(e){var r=e.message,n=e.initiatorId,i=[];return r=r.indexOf("CORS")&&t.CORS?r:r+"<a href='https://xenarius.net/docs/cors.html'>Read more about CORS</a>",i.push("<div>"+r+"</div>"),n&&i.push("Initiated by '"+n+"'"),{message:"",closeOnClick:!0,hideOnSwipe:!1,contentTemplate:function(){var e=document.createElement("div");return e.classList.add("dx-toast-message"),ko.utils.setHtml(e,i.join("")),$(e)}}}(n?{message:r}:r);DevExpress.ui.notify(i,"error",6e5)}}e.showErrorDialog=t,t.CORS=!0}(t=e.Utils||(e.Utils={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){"use strict";function t(e){return e.replace(/\[/g,".").replace(/\]/g,"")}function r(e,t,r){return n(e,t,r,function(e,t){return i(t)(e)})}function n(e,t,r,n){var i="!"===e.charAt(0),o=i?e.substring(1):e,a=o.indexOf("."),s=o.substring(0,a)||o,l=-1===a?"":o.substring(a+1);return t[s]?n(t[s],l,i):e}function i(e){if(!e)return function(e){return ko.unwrap(e)};e=t(e);var r=e.split(".");return function(e){var t=ko.unwrap(e);return r.forEach(function(e,n){if(!t)return!1;var i=n!==r.length-1?ko.unwrap(t[e]):t[e];t=i}),ko.unwrap(t)}}function o(e,t){void 0===t&&(t=window.location.search);for(var r=t.substring(1),n=r.split("&"),i=0;i<n.length;i++){var o=n[i].indexOf("="),a=n[i].slice(0,o),s=n[i].slice(o+1);if(a===e)return s}return null}function a(e,t,r){return n(e,t,r,function(e,t,r){return s(e,t,r)})}function s(t,r,n){var o,a,s,l,u=ko.observable();return r?(l=Object.getOwnPropertyDescriptor(t,r),o=i(r),(!l||l.set||l.writable)&&(a=e.compileSetter(r))):o=function(){return t},s=function(){return ko.unwrap(u),n?!o(t):o(t)},ko.computed(a?{read:s,write:function(e){a(t,n?!e:e),u.valueHasMutated()}}:{read:s})}function l(e,t,r){if("string"==typeof e)return e;var n=r||{getValueCallback:function(e,r){return l(e,t,r)}},i=Array.isArray(e),o=i?[]:{};return n.path=n.path||"",$.each(e,function(e,r){if(n.name=e,n.value=r,n.isArray=i,n.owner=o,Array.isArray(r)||$.isPlainObject(r)){var a=n.path;n.path=n.path?n.path+(n.isArray?"["+n.name+"]":"."+n.name):n.name,o[e]=n.getValueCallback(r,n),n.path=a}else{var s=t(n);void 0!==s&&(o[e]=s)}}),o}function u(e,t,r){return e.split(t).join(r)}function c(e,t){return t.length>e.length?!1:t.length===e.length?t===e:e.substr(0,t.length)===t}function p(e,t){return"string"!=typeof e||"string"!=typeof t?!1:t.length>e.length?!1:t.length===e.length?t===e:1===t.length?e.charAt(e.length-1)===t:e.substr(e.length-t.length,t.length)===t}function f(e,t){var r=d(e,t);return r>=0?e[r]:null}function d(e,t){if(e)for(var r=0;r<e.length;r++)if(t(e[r]))return r;return-1}function h(e){var t,r;if(e instanceof Date)return new Date(e.getTime());if(e&&e instanceof Object){r=Array.isArray(e)?[]:{};for(t in e)e.hasOwnProperty(t)&&(r[t]=h(e[t]));return r}return e}function v(e,t){var r,n={};if(e)for(var i in e)i===t?r=e[i]:n[i]=e[i];return{target:r,leftover:n}}function m(e,t){var r={},n={};if(e)for(var i in e)-1!==$.inArray(i,t)?r[i]=e[i]:n[i]=e[i];return{target:r,leftover:n}}function y(e,t,r){var n={};if(e)for(var i in e)t[i]?n[t[i]]=e[i]:r&&(n[i]=e[i]);return n}function g(e){var t,r=T.exec(e);if(r)if(r[9]&&r[10]||p(e,"Z")){var n=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&parseInt(r[6],10)||0,r[7]&&1e3*parseFloat(r[7])||0);if(r[9]&&r[10]){var i=60*parseInt(r[9],10)+parseInt(r[10],10);n+=("+"===r[8]?-1:1)*i*6e4}t=new Date(n)}else t=new Date(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&parseInt(r[6],10)||0,r[7]&&1e3*parseFloat(r[7])||0);return t}function b(e){e&&$.each(e,function(t,r){null!==r&&"object"==typeof r?b(r):"string"==typeof r&&(T.test(r)||A.test(r))&&(e[t]=x(e[t]))})}function x(e){return T.test(e)?g(e):A.test(e)?new Date(Date.parse(e)):void 0}function w(e){var t,r=e.indexOf("://"),n=e.indexOf("?",r),i={};if(n>=0){t=e.substring(r+3,n);var o=e.substring(n+1).split("&");o.forEach(function(e){var t,r,n=e.indexOf("=");0>n?i[e]=!0:(t=e.substring(0,n),r=e.substr(n+1),i[t]=r)})}else t=e.substr(r+3);if(window.app&&window.app.instance&&window.app.instance.dxapp){var a=window.app.instance;a.functions.navigateToView(t,i,"master")}else window.xetHandleOpenURL={uri:t,params:i}}function E(e,t){return e?function(r){var n=e(r);return t(n)}:t}function C(e,t,r,n){var i=$("<div/>");i.appendTo($(document.body)),i.dxActionSheet({dataSource:t,visible:!0,title:n||"",showTitle:!!n,showCancelButton:r,usePopover:!0,target:e})}function P(e){if(null==e||"function"!=typeof e.then)return!1;var t=String($.Deferred().then),r=String(e.then);return t===r}function V(e){function t(e,t){s[e]?(s[e].constructor!==Array&&(s[e]=[s[e]]),s[e][s[e].length]=t):s[e]=t}function r(e){var t=e.childNodes.length;if(t>0){for(var r=0;t>r;r++){var n=e.childNodes[r];if(3!==n.nodeType&&4!==n.nodeType)return!1}return!0}return!1}function n(e){var t=e.childNodes.length;if(1===t)return e.firstChild.nodeValue;if(t>0){for(var r="",n=0;t>n;n++)r+=(e.childNodes[n].nodeValue||"").trim();return r}}var i,o,a,s={};for(i=0;a=e.attributes[i];i++)c(a.name,"xmlns:")||t(a.name,a.value);for(i=0;o=e.childNodes[i];i++)1===o.nodeType&&(r(o)?t(o.nodeName,n(o)):t(o.nodeName,V(o)));return s}function S(e){function t(e){for(var t=r.getElementsByTagName(e),n=t.length;n--;)t[n].parentNode.removeChild(t[n])}var r=document.createElement("div");r.innerHTML=ko.unwrap(e),t("script"),t("iframe");for(var n=r.getElementsByTagName("a"),i=n.length;i--;)n[i].setAttribute("onClick","AppPlayer.defaultLinkClickHandler(event)");return r.innerHTML}function k(){var t,r,n=arguments[0].target?arguments[0]:arguments[1],i=n.target.href;n.preventDefault(),n.stopPropagation(),c(i,"javascript:")?(t=i.substr(i.indexOf("javascript:")),r=new Function("event",t),r.apply(n.target,[n])):window.open(i,e.LayoutHelper.linkTarget())}e.getModelValue=r,e.compileGetter=i,e.compileSetter=DevExpress.data.utils.compileSetter,e.getQueryVariable=o,e.wrapModelReference=a,e.propertyVisitor=l;var _=function(){function e(){}return e.valueCallback=function(e,t){var r=t.value;return t.name+": "+r+","},e.arrayValueCallback=function(e,t){return t.value+","},e.makeString=function(t,r){void 0===r&&(r=!1);var n="",i={getValueCallback:function(t,i){n+=$.isArray(t)?r?"["+e.makeString(t,!0)+"],":i.name+": ["+e.makeString(t,!0)+"],":r?"{"+e.makeString(t,!1)+"},":i.name+": {"+e.makeString(t,!1)+"},"}};return r?l(t,function(t){n+=e.arrayValueCallback(n,t)},i):l(t,function(t){n+=e.valueCallback(n,t)},i),n.slice(0,-1)},e}();e.BindingStringMaker=_,e.replaceAll=u,e.startsWith=c,e.endsWith=p,e.findInArray=f,e.indexInArray=d,e.clone=h,e.extract=v,e.extractMany=m,e.remap=y;var T=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2}):?([0-9]{2}))?/;e.parseISO8601=g;var A=/\d{2}\s\w{3}\s\d{4}\s\d{2}:\d{2}:\d{2}\s.*$/;e.transformISODates=b,e.parseDate=x;var O=function(){function e(e){this.app=e}return e.prototype.put=function(e,t,r){var n=this.getKey(e,t);void 0===r||null===r?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(r))},e.prototype.get=function(e,t){var r=this.getKey(e,t),n=localStorage.getItem(r);return n?JSON.parse(n):void 0},e.prototype.getKey=function(e,t){return this.getAppUserKey()+(e||"global")+"-"+t},e.prototype.getAppUserKey=function(){var e=this.app.id?this.app.id:"allapps";return"xet-ls-"+e+"-"},e}();e.LocalStorageWrapper=O,e.handleOpenURL=w,e.continueFunc=E,e.showActionPopover=C,e.isPromise=P,e.xmlToJs=V,e.escapeHtml=S,e.defaultLinkClickHandler=k}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.attachedProperties=[]}return e}();e.Component=t;var r=function(e){function t(){e.apply(this,arguments),this.components=[]}return __extends(t,e),t.prototype.layoutChildren=function(){},t}(t);e.Container=r;var n=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.layoutChildren=function(){},t}(r);e.Row=n}(t=e.Layout||(e.Layout={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";var r=DevExpress.data,n=function(){function t(){}return t.initDataObservables=function(t,r){if(!$.isPlainObject(t))return t;var n={},i={};return $.each(t,function(t,n){var o=e.Model.getDescriptor(n,t,r);i[t]=o}),Object.defineProperties(n,i),n},t.createDataSource=function(t,n,i,o){var a=this,s=$.extend({},n,{callerType:"datasource initializer",callerId:t.id}),l=$.extend({},n),u={callerType:"calculated field",callerId:""},c=e.Model.createLinkedModel(t,s,u);"string"==typeof c.store&&(c.store=i[t.store]);var p;t.observables&&t.observables.length&&(p=e.continueFunc(p,function(e){return a.initDataObservables(e,t.observables)})),t.calculatedFields&&t.calculatedFields.length&&(p=e.continueFunc(p,function(r){return e.Model.createModelCore({model:t.calculatedFields},o,$.extend({},{$data:r},l),u.callerId,r),delete r.dispose,r}),c.store&&"function"==typeof c.store.on&&(c.store.on("updating",function(e,r){t.calculatedFields.forEach(function(e){delete r[e.name]})}),c.store.on("updated",function(r,n){e.Model.createModelCore({model:t.calculatedFields},o,$.extend({},{$data:n},l),u.callerId,n),delete n.dispose}))),p&&(c.map=p);var f=new r.DataSource(c);ko.computed(function(){return c.filter}).subscribe(function(e){f.filter(e),f._xetLoadedAtLeastOnce&&f.load()}),ko.computed(function(){return c.sort}).subscribe(function(e){f.sort(e),f._xetLoadedAtLeastOnce&&f.load()});var d=f.load.bind(f);return f.load=function(){return f._xetLoadedAtLeastOnce=!0,d()},c.loadOptions&&f.on("customizeStoreLoadOptions",function(e){e.storeLoadOptions.urlOverride=c.loadOptions.url}),f._calculatedFields=t.calculatedFields,f._refreshOnViewShown=t.refreshOnViewShown,f._monitor=t.monitor,f},t}();t.DataSource=n}(t=e.Data||(e.Data={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";var r=DevExpress.ui.dialog;!function(e){e[e.Return=0]="Return",e[e.Break=1]="Break",e[e.Continue=2]="Continue"}(t.Flow||(t.Flow={}));var n=t.Flow,i=function(){function e(){}return e}();t.Result=i;var o=function(){function r(){}return r.eval=function(e,t){var r=[],n=[];$.each(t,function(e,t){r.push(e),n.push(t)}),r.push("return ("+e+")");var i=Function.apply(null,r);return i.apply(null,n)},r.run=function(e,r,i){if(!e||0===e.length)return t.trivialPromise();var o=0,a=function(s){return o===e.length-1||s&&s.flow in n?t.trivialPromise(s):(o++,e[o].run(r,i).then(a))};return e[o].run(r,i).then(a)},r.prototype.run=function(e,t){throw Error("Not implemented")},r.fromJson=function(e){if(e instanceof r)return e;var t=r.create(e._type);return r.restoreProperties(e,t),t},r.create=function(t){return new e.Logic[t]},r.restoreProperties=function(e,t){return $.each(e,function(e,n){"_type"!==e&&(Array.isArray(n)?t[e]=n.map(function(e){return"object"==typeof e&&e&&e._type?r.fromJson(e):r.restoreProperties(e,Array.isArray(e)?[]:{})}):n&&"object"==typeof n?n&&n._type?t[e]=r.fromJson(n):t[e]=r.restoreProperties(n,{}):t[e]=n)}),t},r}();t.Operation=o;var a=function(e){function r(t,r){if(e.call(this),this.returnValue=null,this.returnExpr="",t in n)this.flow=t,this.returnValue=r;else if(t){var i=t;"undefined"!=typeof i.flow&&(this.flow=i.flow),"undefined"!=typeof i.returnValue&&(this.returnValue=i.returnValue),"undefined"!=typeof i.returnExpr&&(this.returnExpr=i.returnExpr)}}return __extends(r,e),r.prototype.run=function(e,r){var i={flow:this.flow,value:void 0};return this.flow===n.Return&&(this.returnExpr?i.value=e.getValue(this.returnExpr):i.value=this.returnValue),t.trivialPromise(i)},r}(o);t.Event=a;var s=function(e){function r(t){var r=this;e.call(this),this.valueExpr="",this.leftExpr="",t&&$.each(t,function(e,t){r[e]=t||r[e]})}return __extends(r,e),r.prototype.run=function(e,r){var n;if(this.leftExpr)n=this.leftExpr;else{if(!this.variableName)return t.rejectPromise("SetValue: leftExpr must be defined");console.warn("SetValue: variableName and pathExpr are obsolete. Use leftExpr instead"),n=this.pathExpr?this.variableName+"["+this.pathExpr+"]":this.variableName}if(""===this.valueExpr)return t.rejectPromise("SetValue: valueExpr must be defined");var i=e.getValue(this.valueExpr);return e.setValue(n,i),t.trivialPromise()},r}(o);t.SetValue=s;var l=function(e){function r(t){e.call(this),this.variableName="",this.storeExpr="",this.storeId="",t&&(this.variableName=t.variableName,this.storeId=t.storeId)}return __extends(r,e),r.prototype.run=function(e,r){var n=this.storeExpr?e.getValue(this.storeExpr):this.storeId,i=r.getDataStoreConfig(n),o={};return i.fields&&i.fields.forEach(function(e){o[e.name]=void 0}),e.add(this.variableName,o),t.trivialPromise()},r}(o);t.Create=l;var u=function(e){function r(t){e.call(this),this.variableName="",this.value=null,this.expression="",t&&(this.variableName=t.variableName,t.expr?this.expression=t.expr:this.value=t.value)}return __extends(r,e),r.prototype.run=function(e,r){var n=e.getValue(this.variableName),i=this.expression?e.getValue(this.expression):this.value;return n.push(i),t.trivialPromise()},r}(o);t.AddToList=u;var c=function(e){function r(t){e.call(this),this.variableName="",this.valueExpr="",this.indexExpr="",$.extend(this,t)}return __extends(r,e),r.prototype.run=function(e,r){if(!this.variableName)return t.rejectPromise("InsertToList: invalid variable name");if(!this.valueExpr)return t.rejectPromise("InsertToList: invalid value expression");var n=e.getValue(this.variableName);if(!$.isArray(n))return t.rejectPromise("InsertToList: variable should be array");var i=e.getValue(this.valueExpr),o=this.indexExpr?e.getValue(this.indexExpr):void 0;return o>=0?(n.splice(o,0,i),t.trivialPromise()):void 0===o?(n.push(i),t.trivialPromise()):t.rejectPromise("InsertToList: index should be 0 or greater than 0")},r}(o);t.InsertToList=c;var p=function(r){function n(e){var t=this;r.call(this),e&&$.each(e,function(e,r){t[e]=r})}return __extends(n,r),n.prototype.run=function(r,n){var i=this,o=r.getValue(this.listExpr);if(!Array.isArray(o))return t.rejectPromise("IndexInList: listExpr must be evaluated to list");if(!this.predicateExpr)return t.rejectPromise("IndexInList: predicate expression is not defined");if(!r.isDefined(this.resultVariableExpr))return t.rejectPromise("IndexInList: invalid result variable expression");var a=r.clone();a.add("$item");var s=e.indexInArray(o,function(e){return a.setValue("$item",e),a.getValue(i.predicateExpr)});return r.setValue(this.resultVariableExpr,s),t.trivialPromise()},n}(o);t.IndexInList=p;var f=function(r){function n(e){var t=this;r.call(this),e&&$.each(e,function(e,r){t[e]=r})}return __extends(n,r),n.prototype.run=function(r,n){var i=this,o=r.getValue(this.listExpr);if(!Array.isArray(o))return t.rejectPromise("FindInList: listExpr must be evaluated to list");if(!this.predicateExpr)return t.rejectPromise("FindInList: predicate expression is not defined");if(!r.isDefined(this.resultVariableExpr))return t.rejectPromise("FindInList: invalid result variable expression");var a=r.clone();a.add("$item");var s=e.findInArray(o,function(e){return a.setValue("$item",e),a.getValue(i.predicateExpr)});return r.setValue(this.resultVariableExpr,s),t.trivialPromise()},n}(o);t.FindInList=f;var d=function(e){function r(t){var r=this;e.call(this),t&&$.each(t,function(e,t){r[e]=t})}return __extends(r,e),r.prototype.run=function(e,r){this.processObsoleteOptions();var n=e.getValue(this.listExpr);if(!Array.isArray(n))return t.rejectPromise("RemoveFromListByIndex: listExpr must be evaluated to list");var i=e.getValue(this.valueExpr),o=n.indexOf(i);return o>=0&&n.splice(o,1),t.trivialPromise()},r.prototype.processObsoleteOptions=function(){void 0===this.listExpr&&void 0!==this.variableName&&(console.warn("RemoveFromListByValue: variableName is obsolete. Use listExpr instead"),this.listExpr=this.variableName)},r}(o);t.RemoveFromListByValue=d;var h=function(e){function r(t){var r=this;e.call(this),t&&$.each(t,function(e,t){r[e]=t})}return __extends(r,e),r.prototype.run=function(e,r){this.processObsoleteOptions();var n=e.getValue(this.listExpr);if(!Array.isArray(n))return t.rejectPromise("RemoveFromListByIndex: listExpr must be evaluated to list");var i=e.getValue(this.indexExpr);return 0>i?t.rejectPromise("RemoveFromListByIndex: indexExpr must be evaluated to positive number"):(n.splice(this.index,1),t.trivialPromise())},r.prototype.processObsoleteOptions=function(){void 0===this.listExpr&&void 0!==this.variableName&&(console.warn("RemoveFromListByIndex: variableName is obsolete. Use listExpr instead"),this.listExpr=this.variableName),void 0===this.indexExpr&&void 0!==this.index&&(console.warn("RemoveFromListByIndex: index is obsolete. Use indexExpr instead"),this.indexExpr=this.index.toString())},r}(o);t.RemoveFromListByIndex=h;var v=function(e){function r(t){e.call(this),this.expr="",this.resultVariableName="",t&&(this.expr=t.expr,this.resultVariableName=t.resultVariableName)}return __extends(r,e),r.prototype.run=function(e,r){var n=e.getValue(this.expr),i=Array.isArray(n)?n.length:Object.keys(n).length;return e.setValue(this.resultVariableName,i),t.trivialPromise()},r}(o);t.CountList=v,function(e){e[e.Min=0]="Min",e[e.Max=1]="Max",e[e.Sum=2]="Sum",e[e.Average=3]="Average"}(t.AggregateType||(t.AggregateType={}));var m=t.AggregateType,y=function(e){function r(t){var r=this;e.call(this),this.type=m.Sum,this.variableName="",this.resultVariableName="",this.propertyName="",this.seed=0,t&&$.each(t,function(e,t){r[e]=t})}return __extends(r,e),r.prototype.run=function(e,r){var n,i,o,a=this,s=function(e){return a.propertyName?e[a.propertyName]:e},l=e.getValue(this.variableName);if(!e.isDefined(this.resultVariableName))return t.rejectPromise("AggregateList: invalid resultVariableName");if(0===l.length)return e.setValue(this.resultVariableName,null),t.trivialPromise();switch(this.type){case m.Min:n=function(e,t){return e>t?t:e},i=function(e,t){return e};break;case m.Max:n=function(e,t){return t>e?t:e},i=function(e,t){return e};break;case m.Sum:n=function(e,t){return e+t},i=function(e,t){return e};break;case m.Average:n=function(e,t){return e+t},i=function(e,t){return e/t.length};break;default:return t.rejectPromise("AggregateList: invalid aggregate function")}return o=this.seed,l.forEach(function(e){o=n(o,s(e))}),e.setValue(this.resultVariableName,i(o,l)),t.trivialPromise()},r}(o);t.AggregateList=y;var g=function(e){function r(t){var r=this;e.call(this),this.variableName="",this.desc=!1,this.propertyName="",t&&$.each(t,function(e,t){return r[e]=t})}return __extends(r,e),r.prototype.run=function(e,r){var n,i=this,o=e.getValue(this.variableName);return this.propertyName?n=this.desc?function(e,t){return t[i.propertyName]-e[i.propertyName]}:function(e,t){return e[i.propertyName]-t[i.propertyName]}:this.desc&&(n=function(e,t){return t-e}),o.sort(n),t.trivialPromise()},r}(o);t.SortList=g;var b=function(e){function r(t){var r=this;e.call(this),this.valueExpr="",this.indexName="loopIndex",this.valueName="loopValue",this.calls=[],t&&$.each(t,function(e,t){void 0!==t&&(r[e]=t)})}return __extends(r,e),r.prototype.run=function(e,r){var i=this,a=e.getValue(this.valueExpr);if("object"!=typeof a)return t.rejectPromise("Loop: passed value should be array or object");var s=Array.isArray(a),l=s?null:Object.keys(a),u=$.extend(s?[]:{},a),c=0,p=s?a.length:l.length;if(0===p)return t.trivialPromise();var f=e.clone();f.add(this.indexName),f.add(this.valueName);var d=$.Deferred(),h=function(){if(c>=p)return void d.resolve();var e=s?c:l[c];f.setValue(i.indexName,e),f.setValue(i.valueName,u[e]),o.run(i.calls,f,r).done(function(e){if(void 0!==e){if(e.flow===n.Break)return void d.resolve();if(e.flow===n.Return)return void d.resolve(e)}c++,h()}).fail(function(e){d.reject(e)})};return h(),d.promise()},r}(o);t.Loop=b;var x={indexName:"loopIndex",startIndexIncluded:0,endIndexExcluded:0,calls:[]},w=function(e){function t(t){e.call(this),$.extend(this,x,t)}return __extends(t,e),t.prototype.run=function(e,t){var r=this,i=this.startIndexIncluded<this.endIndexExcluded?1:-1,a=e.clone();a.add(this.indexName);var s=$.Deferred(),l=this.startIndexIncluded,u=function(){return l===r.endIndexExcluded?void s.resolve():(a.setValue(r.indexName,l),void o.run(r.calls,a,t).done(function(e){if(void 0!==e){if(e.flow===n.Break)return void s.resolve();if(e.flow===n.Return)return void s.resolve(e)}l+=i,u()}).fail(function(e){s.reject(e)}))};return u(),s.promise()},t}(o);t.ForLoop=w;var E=function(){function e(){this.calls=[]}return e}();t.SwitchCase=E;var C=function(e){function r(t){e.call(this),this.expr="",this.cases=[],this.otherwise=[],t&&(this.expr=t.expr||"",this.cases=t.cases||[],this.otherwise=t.otherwise||[])}return __extends(r,e),r.prototype.run=function(e,r){var n=e.getValue(this.expr),i=null;return this.cases.forEach(function(t){var a=e.getValue(t.valueExpr);a===n&&(i=o.run(t.calls,e,r))}),i||(this.otherwise.length?o.run(this.otherwise,e,r):t.trivialPromise())},r}(o);t.Switch=C,function(e){e[e.First=0]="First",e[e.All=1]="All"}(t.RetrieveType||(t.RetrieveType={}));var P=t.RetrieveType,V=function(e){function t(t){e.call(this),this.type=P.All,this.storeId="",this.variableName="",this.errorVariableName="",t&&(this.type=t.type,this.variableName=t.variableName,this.storeId=t.storeId)}return __extends(t,e),t.prototype.run=function(e,t){var r=this,n=$.Deferred(),i=function(t){r.errorVariableName?(e.setValue(r.errorVariableName,t),n.resolve()):n.reject("[RetrieveObject] "+t)};switch(this.type){case P.All:t.load(this.storeId).then(function(t){e.setValue(r.variableName,t),n.resolve()},i);break;case P.First:default:t.load(this.storeId,{take:1}).then(function(t){e.setValue(r.variableName,t&&t.length>0?t[0]:null),n.resolve()},i)}return n.promise()},t}(o);t.RetrieveObject=V;var S=function(e){function r(t){e.call(this),this.variableName="",this.errorVariableName="",this.properties=[],t&&(t.variableName&&(this.variableName=t.variableName),t.properties&&(this.properties=t.properties))}return __extends(r,e),r.prototype.run=function(e,r){var n=this,i=$.Deferred(),o=e.get(this.variableName),a=o.type,s=r.keyOf(a,o);return s?r.byKey(a,s).then(function(t){n.properties&&n.properties.length>0?n.properties.forEach(function(e){o.value[e]=t[e]}):e.setValue(n.variableName,t),i.resolve()},function(t){n.errorVariableName?(e.setValue(n.errorVariableName,t),i.resolve()):i.reject("[ResetObject] "+t)}):t.rejectPromise("ResetObject: object in '"+this.variableName+"' doesn't have a key. Probably, is has not been saved to a store.")},r}(o);t.ResetObject=S;var k=function(e){function r(t){e.call(this),this.variableName="",this.resultVariableName="",t&&$.extend(this,t)}return __extends(r,e),r.prototype.run=function(e,r){var n=e.getValue(this.variableName),i=Array.isArray(n)?[]:{};return e.setValue(this.resultVariableName,$.extend(i,n)),t.trivialPromise()},r}(o);t.CloneObject=k;var _=function(e){function r(t){var r=this;e.call(this),this.viewId="",this.viewIdExpr="",this.viewParametersExpr="",t&&$.each(t,function(e,t){r[e]=t})}return __extends(r,e),r.prototype.run=function(e,r){var n=this.viewIdExpr?e.getValue(this.viewIdExpr):this.viewId,i={};this.viewParameters?this.viewParameters.forEach(function(t){var r=e.getValue(t.valueExpr);i[t.name]=r}):this.viewParametersExpr&&(i=e.getValue(this.viewParametersExpr));var o=e.getValueOrDefault("$model.pane");return r.navigateToView(n,i,o),t.trivialPromise()},r}(o);t.NavigateToView=_;var T=function(e){function t(t){var r=this;e.call(this),this.objectExpr="",this.storeId="",this.keyExpr="",this.errorVariableName="",t&&$.each(t,function(e,t){r[e]=t})}return __extends(t,e),t.prototype.run=function(e,t){var r=this,n=$.Deferred(),i=e.getValue(this.objectExpr),o=this.keyExpr?e.getValue(this.keyExpr):void 0;return t.save(i,this.storeId,o).then(function(e){n.resolve(e)},function(t){r.errorVariableName?(e.setValue(r.errorVariableName,t),n.resolve()):n.reject("[Save] "+t)}),n.promise()},t}(o);t.Save=T;var A=function(e){function t(t){var r=this;e.call(this),this.objectExpr="",this.storeId="",this.storeExpr="",this.errorVariableName="",t&&$.each(t,function(e,t){r[e]=t})}return __extends(t,e),t.prototype.run=function(e,t){var r=this,n=$.Deferred(),i=e.getValue(this.objectExpr),o=this.storeExpr?e.getValue(this.storeExpr):this.storeId;return t.insert(i,o).then(function(e){n.resolve(e)},function(t){r.errorVariableName?(e.setValue(r.errorVariableName,t),n.resolve()):n.reject("[Insert] "+t)}),n.promise()},t}(o);t.Insert=A;var O=function(e){function r(t){var r=this;e.call(this),this.storeId="",this.storeExpr="",t&&$.each(t,function(e,t){r[e]=t})}return __extends(r,e),r.prototype.run=function(e,r){var n=this.storeExpr?e.getValue(this.storeExpr):this.storeId;return r.refresh(n),t.trivialPromise()},r}(o);t.Refresh=O;var M=function(e){function r(t){var r=this;e.call(this),this.urlExpr=null,this.method="get",this.dataExpr=null,this.variableName=null,this.errorVariableName=null,this.cacheResponse=!1,this.headersExpr=null,this.timeout=null,this.options=null,this.withCredentials=!1,t&&$.each(t,function(e,t){r[e]=t})}return __extends(r,e),r.prototype.run=function(e,n){var i=this;n.busy();var o,a,s=$.Deferred(),l=r.methods.filter(function(e){return e.name===i.method||e.value===i.method}),u=l.length?l[0].value:"POST",c=this.dataExpr?e.getValue(this.dataExpr):void 0,p=this.dataType||"json",f=this.headersExpr?f=e.getValue(this.headersExpr):{};if(!this.urlExpr)return t.rejectPromise("SendRequest: no URL provided");this.method=this.method||"",o=e.getValue(this.urlExpr);var d=$.extend({},{url:o,data:c,type:u,cache:this.cacheResponse,headers:f,timeout:$.isNumeric(this.timeout)?this.timeout:void 0,xhrFields:{withCredentials:this.withCredentials}},this.options);return"jsonp"===p&&(d.dataType=p),a=$.ajax(d),a=a.then(function(t){i.variableName&&e.setValue(i.variableName,t),s.resolve()},function(t){i.errorVariableName?(e.setValue(i.errorVariableName,t),s.resolve()):s.reject("SendRequest: "+JSON.stringify(t))}),a.always(n.available),s.promise()},r.methods=[{name:"get",value:"GET"},{name:"post",value:"POST"},{name:"delete",value:"DELETE"},{name:"put",value:"PUT"},{name:"head",value:"HEAD"},{name:"options",value:"OPTIONS"},{name:"merge",value:"MERGE"},{name:"patch",value:"PATCH"}],r}(o);t.SendRequest=M;var N=function(e){function t(t){e.call(this),this.objectOrKeyExpr="",this.storeId="",this.errorVariableName="",t&&(this.objectOrKeyExpr=t.objectOrKeyExpr||"",this.storeId=t.storeId||"")}return __extends(t,e),t.prototype.run=function(e,t){var r=this,n=$.Deferred(),i=e.getValue(this.objectOrKeyExpr);return t["delete"](i,this.storeId).then(function(e){n.resolve(e)},function(t){r.errorVariableName?(e.setValue(r.errorVariableName,t),
n.resolve()):n.reject("[Delete] "+t)}),n.promise()},t}(o);t.Delete=N;var I=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.run=function(e,r){return r.back(),t.trivialPromise()},r}(o);t.NavigateBack=I;var D=function(e){function n(t){e.call(this),this.yesNext=[],this.noNext=[],this.messageExpr=null,this.titleExpr=null,t&&(this.yesNext=t.yesNext,this.noNext=t.noNext,this.messageExpr=t.messageExpr,this.titleExpr=t.titleExpr)}return __extends(n,e),n.prototype.run=function(e,n){var i=this,a=e.getValue(this.messageExpr),s=e.getValue(this.titleExpr);return r.confirm(a,s).then(function(r){var a=r?i.yesNext:i.noNext;return a&&a.length>0?o.run(a,e,n):t.trivialPromise()})},n}(o);t.ShowConfirmDialog=D;var R=function(e){function n(t){e.call(this),this.messageExpr=null,this.titleExpr=null,t&&(this.messageExpr=t.messageExpr,this.titleExpr=t.titleExpr)}return __extends(n,e),n.prototype.run=function(e,n){var i=e.getValue(this.messageExpr),o=e.getValue(this.titleExpr);return r.alert(i,o).then(function(){return t.trivialPromise()})},n}(o);t.ShowAlert=R;var L=function(r){function n(e){r.call(this),this.urlExpr=null,this.sameWindow=!1,e&&(this.urlExpr=e.urlExpr)}return __extends(n,r),n.prototype.run=function(r,n){var i=r.getValue(this.urlExpr);return"desktop"===e.LayoutHelper.getDeviceType()?this.sameWindow?document.location.href=i:window.open(i,"_blank"):window.open(i,"_system"),t.trivialPromise()},n}(o);t.ShowWebPage=L;var j=function(r){function n(e){r.call(this),this.resultVariableName="",e&&(this.resultVariableName=e.resultVariableName)}return __extends(n,r),n.prototype.run=function(r,n){if(!r.isDefined(this.resultVariableName))return t.rejectPromise("GetDeviceType: variable '"+this.resultVariableName+"' does not exist");var i=e.LayoutHelper.getDeviceType();return r.setValue(this.resultVariableName,i),t.trivialPromise()},n}(o);t.GetDeviceType=j;var F=function(e){function r(t){e.call(this),this.variableName="",this.format="ddMMMM",this.resultVariableName="",t&&(this.variableName=t.variableName,this.format=t.format,this.resultVariableName=t.resultVariableName)}return __extends(r,e),r.prototype.run=function(e,r){if(!e.isDefined(this.resultVariableName))return t.rejectPromise("FormatDateTime: variable '"+this.resultVariableName+"' does not exist");var n=e.getValue(this.variableName);return e.setValue(this.resultVariableName,Globalize.format(n,this.format)),t.trivialPromise()},r.formats=["HH:mm:ss","h:mm:ss","yyyy-MM-dd","MM/dd/yyyy","dd.MM.yyyy","yyyy-MM-dd HH:mm:ss","dd.MM.yyyy HH:mm:ss","MM/dd/yyyy h:mm:ss"],r}(o);t.FormatDateTime=F;var B=function(r){function n(e){r.call(this),this.variableName="",this.resultVariableName="",e&&(this.variableName=e.variableName,this.resultVariableName=e.resultVariableName)}return __extends(n,r),n.prototype.run=function(r,n){var i=r.getValue(this.variableName);return r.setValue(this.resultVariableName,e.parseDate(i)),t.trivialPromise()},n}(o);t.ParseDateTime=B;var H=function(r){function n(e){r.call(this),this.variableName="",this.resultVariableName="",e&&(this.variableName=e.variableName,this.resultVariableName=e.resultVariableName)}return __extends(n,r),n.prototype.run=function(r,n){if(!this.variableName||!r.isDefined(this.variableName))return t.rejectPromise("XmlToJs: variable '"+this.variableName+"' does not exist");if(!this.resultVariableName||!r.isDefined(this.resultVariableName))return t.rejectPromise("XmlToJs: result variable '"+this.resultVariableName+"' does not exist");var i,o=r.getValue(this.variableName);try{i=$.isXMLDoc(o)?o:$.parseXML(o),r.setValue(this.resultVariableName,e.xmlToJs(i.documentElement))}catch(a){r.setValue(this.resultVariableName,{})}return t.trivialPromise()},n}(o);t.XmlToJs=H;var U=function(){function e(){}return e}();t.CallParam=U;var Y=function(e){function r(t){e.call(this),this.functionName="",this.resultVariableName="",this.params=[],t&&(this.functionName=t.functionName,this.resultVariableName=t.resultVariableName||"",this.params=t.params||[])}return __extends(r,e),r.prototype.run=function(e,r){var n=this;if("string"!=typeof this.functionName||0===this.functionName.length)return t.rejectPromise("Call: a function name must be specified");var i=0===this.functionName.indexOf("$model")?"$model":"$global",o=e.getValue(i),a=this.functionName.replace(i+".",""),s=o[a]||r[a],l=e.getContext();return this.params.forEach(function(t){var r=e.getValue(t.expr);l[t.name]=r}),this.resultVariableName?s(l).then(function(r){return e.setValue(n.resultVariableName,r),t.trivialPromise()}):s(l)||t.trivialPromise()},r}(o);t.Call=Y;var G=function(e){function r(){e.apply(this,arguments)}return __extends(r,e),r.prototype.run=function(e,r){return t.trivialPromise()},r}(o);t.Debugger=G;var z=function(e){function r(t){e.call(this),this.expr="",this.level="info",t&&(this.expr=t.expr,this.level=t.level||this.level)}return __extends(r,e),r.prototype.run=function(e,r){if(!this.expr)return t.rejectPromise("Log: an expression must be specified");var n=e.getValue(this.expr),i=r.log;return i(this.level,n),t.trivialPromise()},r}(o);t.Log=z;var J=function(e){function r(t){e.call(this),this.expr="",this.errorVariableName="",t&&(this.expr=t.expr,this.errorVariableName=t.errorVariableName)}return __extends(r,e),r.prototype.run=function(e,r){return this.expr?this.eval(this.expr,e):t.rejectPromise("Eval: an expression must be specified")},r.prototype.eval=function(e,t){var n=this,i=function(e,r){n.errorVariableName?(t.setValue(n.errorVariableName,r),e.resolve()):e.reject(r)},o=t.getContext(),a="";return $.each(o,function(e){a+="variables.setValue('"+e+"', "+e+");"}),r.exec(e,a,i,t,o)},r.runFn=function(e,t,r){var n=e.replace(/\n/g," ").replace(/\r/g," ").replace(/"/g,'\\"'),i=new Function("_values_","variables",'with(_values_) {return eval("'+n+'")}');return i.apply(null,[t,r])},r.exec=function(e,t,n,i,o){var a=$.Deferred();try{var s=r.runFn(e,o);window.AppPlayer.isPromise(s)?s.then(function(){r.runFn(t,o,i),a.resolve()},function(e){n(a,e)}):(r.runFn(t,o,i),a.resolve())}catch(l){n(a,l)}return a},r}(o);t.Eval=J}(t=e.Logic||(e.Logic={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){"use strict";!function(e){e[e.PRIMITIVE_TYPE=0]="PRIMITIVE_TYPE",e[e.ARRAY_TYPE=1]="ARRAY_TYPE",e[e.OBJECT_TYPE=2]="OBJECT_TYPE",e[e.STORE_TYPE=3]="STORE_TYPE",e[e.TYPED_OBJECT=4]="TYPED_OBJECT"}(e.TYPES||(e.TYPES={}));var t=e.TYPES,r=function(){function e(r){this.oDataToJsonTypeMap={String:"string",Int32:"number",Int64:"number",Guid:"string",Boolean:"boolean"},this.types=[],this.addWithList({name:e.BOOLEAN,kind:t.PRIMITIVE_TYPE,defaultValueCtor:function(){return!1},toUIString:function(e){return ko.unwrap(e).toString()}}),this.addWithList({name:"number",kind:t.PRIMITIVE_TYPE,defaultValueCtor:function(){return 0},toUIString:function(e){return ko.unwrap(e).toString()}}),this.addWithList({name:"string",kind:t.PRIMITIVE_TYPE,defaultValueCtor:function(){return""},toUIString:function(e){return'"'+ko.unwrap(e)+'"'}}),this.addWithList({name:"datetime",kind:t.PRIMITIVE_TYPE,defaultValueCtor:function(){return new Date},toUIString:function(e){return ko.unwrap(e).toString()}}),this.addWithList({name:"object",kind:t.OBJECT_TYPE,defaultValueCtor:function(){return{}},toUIString:function(e){return null===e?"null":"undefined"==typeof e?"undefined":ko.unwrap(e).toString()}}),this.addWithList({name:"guid",kind:t.PRIMITIVE_TYPE,defaultValueCtor:function(){return""},toUIString:function(e){return ko.unwrap(e)}}),this.addStoreTypes(r)}return Object.defineProperty(e,"BOOLEAN",{get:function(){return"boolean"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OBJECT",{get:function(){return"object"},enumerable:!0,configurable:!0}),e.hasProperties=function(e){return e.kind!==t.STORE_TYPE?!1:e.properties.length>1&&!!e.keyProperty||e.properties.length>0&&!e.keyProperty},e.migrateObject=function(e,r){if(r.kind!==t.STORE_TYPE)return e;if(e instanceof Object){var n=r.properties;if(n.length){var i={};return r.keyProperty&&(i[r.keyProperty.name]=!0),n.forEach(function(t){e.hasOwnProperty(t.name)||(e[t.name]=t.type.defaultValueCtor()),i[t.name]=!0}),$.each(Object.keys(e),function(t,r){i[r]||delete e[r]}),e}return e}return r.defaultValueCtor()},e.prototype.get=function(e){return this.types[ko.unwrap(e)]},e.prototype.getAll=function(){return this.types},e.prototype.typeOf=function(e){var r=typeof e;if(this.types[r])return r;for(var n=0;n<this.types.length;n++){var i=this.types[n];if(i.kind===t.PRIMITIVE_TYPE){if(typeof i.defaultValueCtor()===r)return i.name;if(this.isStoreObject(e,i))return i.name}}return null},e.prototype.storeId=function(e){var r=this.get(e);if(r){if(r.kind===t.STORE_TYPE)return r.name;if(r.kind===t.ARRAY_TYPE&&r.nestedType.kind===t.STORE_TYPE)return r.nestedType.name}return null},e.prototype.addTypedObjectType=function(e){e&&this._add(e)},e.prototype.addStoreTypes=function(r){var n=this;r&&r.forEach(function(r){var i,o=[];if(r.fields&&r.fields.forEach(function(e){var t=n.get(e.type);t||(console.warn("Store '"+r.id+"' field '"+e.name+"' has unknown type '"+e.type+"'"),t=n.get("object"));var a={name:e.name,type:t};e.name===r.key?i=a:o.push(a)}),!i&&r.key){var a=n.oDataToJsonTypeMap[r.keyType];i={name:r.key,type:n.get(a)||n.get(e.OBJECT)}}n.addWithList({name:r.id,kind:t.STORE_TYPE,keyProperty:i,properties:o,defaultValueCtor:function(){return n.defaultObjectCtor(o)},toUIString:function(e){return"{"+r.id+"}"}})})},e.prototype.isStoreObject=function(e,t){if(!$.isPlainObject(e))return!1;var r=!0;return $.each(e,function(e,n){return r=t.properties.some(function(t){return e===t.name})}),r},e.prototype.defaultObjectCtor=function(e){var t={};return e.forEach(function(e){t[e.name]=e.type.defaultValueCtor()}),t},e.prototype.createListType=function(e){var r={name:e.name+"[]",kind:t.ARRAY_TYPE,defaultValueCtor:function(){return[]},nestedType:e,toUIString:function(t){t=ko.unwrap(t);var r=e.name+"[";return t&&t.length>0&&(r+=t.length),r+"]"}};return r},e.prototype.addWithList=function(e){this._add(e);var t=this.createListType(e);this._add(t)},e.prototype._add=function(e){this.types.push(e),this.types[e.name]=e},e}();e.TypeInfoRepository=r}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";var r=function(){function t(e){this._config=e,this.value=e.value}return Object.defineProperty(t.prototype,"name",{get:function(){return this._config.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameter",{get:function(){return this._config.parameter||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._config.type||"object"},enumerable:!0,configurable:!0}),t.prototype.resetValue=function(){this.value=e.clone(this._config.value)},t.fromJson=function(e){var r=new t(e);return r},t}();t.Variable=r}(t=e.Logic||(e.Logic={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(e){var t;!function(e){"use strict";function t(e){var t=n[e.status];return t?t+" (Error code: "+e.status+")":e.statusText}function r(e){var t=function(e){};return e&&e.length&&(t=function(t){t.headers=t.headers||{},e.forEach(function(e){t.headers[e.name]=e.value})}),t}var n={400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked (WebDAV;)",424:"Failed Dependency (WebDAV;)",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage (WebDAV)",508:"Loop Detected (WebDAV)",510:"Not Extended",511:"Network Authentication Required"};e.getResponseError=t,e.addHeaders=r}(t=e.Utils||(e.Utils={}))}(t=e.Stores||(e.Stores={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(e){"use strict"}(t=e.Views||(e.Views={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";function r(t){var r=t.componentName?e.Views.componentInfos[t.componentName]:null,n=[],i=e.propertyVisitor(t.viewModel,function(i){var o,a=i.value,s=i.name,l=!1,u=a;if(r&&r.events&&(l=r.events.some(function(e){return e===s})),l){o=t.functions[a];var c=$.extend({},t.runContext);u=function(e){var r=e?e.jQueryEvent:null;return r&&r.stopPropagation&&"command"!==t.componentName&&r.stopPropagation(),e&&(e.itemData||e.data)?c.$data=e.itemData||e.data:c.$data=t.runContext.$data,o(c)}}else if("string"==typeof a){var p=a;0===p.indexOf("'")&&p.lastIndexOf("'")===p.length-1&&(p=p.substr(1,p.length-2)),u=e.wrapModelReference(p,t.runContext,t.callerInfo),u!==p&&n.push(i.path?i.path+"."+s:s)}return u});return r&&r.componentViewModel&&(i=r.componentViewModel(i)),n.length>0&&(i._bindingProperties=n),i}function n(e){for(;e.$parent;){if(void 0!==e.nestedTemplateModel)return e.nestedTemplateModel;e=e.$parent}return!1}function i(e,t,n,i,o){var a;n&&e&&(a=$(ko.virtualElements.firstChild(e)).parents("[data-options^='dxTemplate']"),a.length>0&&(o=ko.dataFor(a.get(0))));var s=r({componentName:t.component,runContext:{$data:o,$model:i,$global:i._global},callerInfo:{callerType:"getComponentModel delegate",callerId:t.component},viewModel:t.viewModel,functions:i._functions});return s.nestedTemplateModel=n,s}var o=1,a=function(){function e(){}return e.GetDefaults=function(e){return e.type&&t.componentInfos[e.type]&&t.componentInfos[e.type].defaults?t.componentInfos[e.type].defaults:{}},e}();t.DefaultsProvider=a;var s=function(){function r(e,t){this.options={},this.options=$.extend({},{designMode:!1,defaultsGetter:a.GetDefaults},t),this.config=$.extend(!0,{},this.options.defaultsGetter(e),e)}return r.prototype._getModelObject=function(e,t){return this.patchConfig(e||this.config,t)},r.prototype._getBindnigStringObject=function(e){var t=$.extend({},e);return delete t.type,t},r.prototype.getModel=function(t,r){var n=this._getModelObject(r||this.config,t),i=this;return{model:n,get bindingString(){return e.BindingStringMaker.makeString(i._getBindnigStringObject(n))}}},r.prototype._patchField=function(e){return"string"==typeof e&&(e="'"+e.replace(/'/g,"\\'")+"'"),e},r.prototype._patchConfig=function(e,t){return this.patchConfig({config:e},t).config},r.prototype._patchEvents=function(e,t,r){t.events&&t.events.forEach(function(t){var n,i,a,s=e[t];s&&r&&r.createFunctionCompiler&&(a=r.createFunctionCompiler(s),n=function(r){return a.run($.extend({},r),{callerType:"event of the "+e.id+"component",callerId:t})},i="anonymousEvent"+o++,r.functions[i]=n,e[t]=i)})},r.prototype.patchConfig=function(r,n){var i=this;return e.propertyVisitor(this.patchStyles(r),function(e){return i.options.designMode||"type"===e.name?e.value:i._patchField(e.value)},{getValueCallback:function(e){var r=e.type&&t.componentInfos[e.type];return r?(i._patchEvents(e,r,n),new r.rendererType(e,null).getModel(n)):i.patchConfig(e,n)}})},r.prototype.patchStyles=function(e){return $.each(e.style||{},function(t,r){var n=t.indexOf("-"),i=function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""};if(-1!==n){delete e.style[t];var o=t.substring(0,n),a=i(t.substring(n+1));e.style[""+o+a]=r}}),e},r.prototype._copyMargins=function(e,t){e&&t&&(t.marginTop=e.marginTop,t.marginRight=e.marginRight,t.marginBottom=e.marginBottom,t.marginLeft=e.marginLeft)},r}();t.ComponentMarkupRenderBase=s;var l=function(t){function r(e,r){t.call(this,e,{}),this.viewConfig=e,this.application=r}return __extends(r,t),r.prototype.getModel=function(){var r=t.prototype.getModel.call(this,this.application).model;return{model:r,bindingString:e.BindingStringMaker.makeString({name:r.id,title:r.title,disableCache:r.disableCache,pane:r.pane})}},r.prototype.render=function(){var e,t,r=this;if(dust.onLoad=function(e,t){var n=document.getElementById(e);n||r.application.registerMissingTemplate(e.substr("xet-dust-".length)),t(null,n?n.innerHTML:"!template with name "+e+" is not found!")},dust.render("xet-dust-view",this.getModel(),function(r,n){t=r,e=n}),!e)throw new Error("Something went wrong during rendering of the '"+this.viewConfig.id+"' view markup. Error: \n"+t);return e},r}(s);t.ViewMarkupRenderer=l;var u=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.prototype.getModel=function(r){var n=e.extract(this.config,"components"),i={type:this.config.type,box:t.prototype.getModel.call(this,r,n.leftover),components:this._patchConfig(n.target,r)};return{model:i,bindingString:i.box.bindingString}},r}(s);t.BoxMarkupRender=u;var c=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.prototype.getModel=function(r){var n=this,i=e.extractMany(this.config.style,["verticalAlign","maxWidth"]),o=$.extend({},this.config,{container:{containerStyle:e.remap(i.leftover,{horizontalAlign:"textAlign"},!0),contentStyle:i.target}}),a=e.extract(o,"components");this._copyMargins(this.config.style,o.container.containerStyle);var s={type:this.config.type,scrollable:!!this.config.scrollable,container:t.prototype.getModel.call(this,r,a.leftover),components:(a.target||[]).map(function(e){return t.prototype._patchConfig.call(n,e,r)})};return{model:s,bindingString:s.container.bindingString}},r}(s);t.ContainerMarkupRender=c;var p=function(e){function t(t,r){void 0===r&&(r={}),e.call(this,t,r)}return __extends(t,e),t.prototype._getModelObject=function(t,r){return t.mode="password",e.prototype._getModelObject.call(this,t,r)},t}(s);t.PassboxMarkupRender=p;var f=function(e){function t(t,r){void 0===r&&(r={}),e.call(this,t,r)}return __extends(t,e),t.prototype._getModelObject=function(t,r){return t.pickerType="rollers",e.prototype._getModelObject.call(this,t,r)},t}(s);t.DateboxMarkupRender=f;var d=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.prototype._getModelObject=function(r,n){var i=t.prototype._getModelObject.call(this,r,n),o=e.LayoutHelper.getDeviceType();return["showIcon","showText"].forEach(function(e){i[e]&&(i[e]=i[e][o])}),i},r.prototype._getBindnigStringObject=function(e){var r=t.prototype._getBindnigStringObject.call(this,e);return r.type=e.buttonType,r},r}(s);t.CommandMarkupRender=d;var h=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.getBootstrapColStyle=function(e,t,r){var n="",i=["lg","md","tablet","phone"],o={lg:"lg",md:"md",tablet:"sm",phone:"xs"},a=e.span;return i.forEach(function(e){t&&t[e]&&(a=r/t[e]),n+="col-"+o[e]+"-"+a+" "}),n},r.prototype.getModel=function(n){var i=this,o=e.extract(this.config,"columns");(o.target||[]).forEach(function(e){e.style=e.style||{},e.style.verticalAlign=o.leftover.style&&o.leftover.style.verticalAlign||"top"});var a={type:this.config.type,row:t.prototype.getModel.call(this,n,o.leftover),columns:(this._patchConfig(o.target,n)||[]).map(function(o){return $.extend(o,{bootstrapColStyle:i._patchField(r.getBootstrapColStyle(o,i.config.wrap,i.config.totalSpanCount||12)),style:t.prototype.getModel.call(i,n,e.remap(o.style,{horizontalAlign:"textAlign"},!0))})})};return{model:a,bindingString:a.row.bindingString}},r}(s);t.RowMarkupRender=h;var v=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.prototype.getModel=function(r){var n=e.extract(this.config,"itemComponents"),i=e.extract(n.leftover,"groupComponents");i.leftover.scrollingEnabled=!!this.config.scrollable;var o={type:this.config.type,list:t.prototype.getModel.call(this,r,i.leftover),item:this._patchConfig(n.target,r),group:this._patchConfig(i.target,r)};return{model:o,bindingString:o.list.bindingString}},r}(s);t.ListMarkupRender=v;var m=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.prototype.getModel=function(r){var n=this,i=e.extract(this.config,"fields"),o={type:this.config.type,fieldset:t.prototype.getModel.call(this,r,i.leftover),fields:(i.target||[]).map(function(e){return e.visible=void 0===e.visible?!0:e.visible,$.extend(!0,{model:n._patchConfig({title:e.title,visible:e.visible},r)},n._patchConfig(e,r))}),singleColumnLayout:"phone"===e.LayoutHelper.getDeviceType()};return{model:o,bindingString:o.fieldset.bindingString}},r}(s);t.FieldsetMarkupRender=m;var y=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.prototype.getModel=function(r){var n=e.extract(this.config,"tabs");delete n.leftover.type,this.config.style&&this.config.style.height&&(n.leftover.height=this.config.style.height);var i=e.extract(n.leftover,"style"),o={type:this.config.type,tabpanel:t.prototype.getModel.call(this,r,i.leftover),control:t.prototype.getModel.call(this,r,{tabpanel:i.leftover,style:i.target}),tabs:this._patchConfig(n.target,r)};return{model:o,bindingString:o.tabpanel.bindingString}},r}(s);t.TabsMarkupRender=y;var g=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.prototype.getModel=function(r){var n=e.extract(this.config,"panels");delete n.leftover.type;var i=e.extract(n.leftover,"style"),o={type:this.config.type,control:t.prototype.getModel.call(this,r,{options:i.leftover,style:i.target}),panels:this._patchConfig(n.target,r)};return{model:o,bindingString:""}},r}(s);t.AccordionMarkupRender=g;var b=function(t){function r(e,r){void 0===r&&(r={}),t.call(this,e,r)}return __extends(r,t),r.prototype.getModel=function(r){var n=e.extract(this.config,"components");return{model:{type:this.config.type,scrollview:t.prototype.getModel.call(this,r,n.leftover),components:this._patchConfig(n.target,r)},bindingString:""}},r}(s);t.ScrollViewMarkupRender=b,t.getComponentModel=r,t.withModelBinding=i,ko.bindingHandlers.withModel={init:function(e,t,r,o,a){var s=t(),l=n(a),u=a.$root,c=a.$data,p=i(e,s,l,u,c);return ko.applyBindingsToDescendants(a.createChildContext(p,"component",function(e){ko.utils.extend(e,t())}),e),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.withModel=!0}(t=e.Views||(e.Views={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";t.componentInfos={view:{rendererType:t.ComponentMarkupRenderBase,events:["onLoad","onShow","onHide","onDispose"]},link:{rendererType:t.ComponentMarkupRenderBase,defaults:{text:"",link:"",visible:!0},componentViewModel:function(t){return t.clickHandler=e.defaultLinkClickHandler,t}},label:{rendererType:t.ComponentMarkupRenderBase,defaults:{text:"",visible:!0},componentViewModel:function(t){return t.htmlText=ko.computed(function(){return e.escapeHtml(t.text)}),t}},button:{rendererType:t.ComponentMarkupRenderBase,events:["onClick"],componentViewModel:function(e){var t=$.extend({},e);return t.type=ko.computed(function(){return"transparent"===e.kind?"normal":e.kind}),t._classNames=ko.computed(function(){return"transparent"===e.kind?{transparent:!0}:void 0}),t}},input:{rendererType:t.ComponentMarkupRenderBase,events:["onChange"]},image:{rendererType:t.ComponentMarkupRenderBase,defaults:{src:null,width:"auto",height:"auto",visible:!0}},fileimage:{rendererType:t.ComponentMarkupRenderBase,defaults:{emptyLabel:"Click or tap to select image",changeImageText:"Take photo or select from gallery",clearText:"Clear",openGalleryText:"Select from gallery",takePhotoText:"Take photo",style:{fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal"}},componentViewModel:function(e){return new t.FileImageEditorViewModel(e)}},icon:{rendererType:t.ComponentMarkupRenderBase},textarea:{rendererType:t.ComponentMarkupRenderBase,events:["onChange"]},passbox:{rendererType:t.PassboxMarkupRender,events:["onChange"]},colorpicker:{rendererType:t.ComponentMarkupRenderBase,events:["onChange"]},numberbox:{rendererType:t.ComponentMarkupRenderBase,defaults:{showSpinButtons:!0,value:null},events:["onValueChanged"]},radio:{rendererType:t.ComponentMarkupRenderBase,componentViewModel:function(t){return e.remap(t,{stringItems:"items",stringValue:"value"},!0)}},actionsheet:{rendererType:t.ComponentMarkupRenderBase,events:["onItemClick"]},"switch":{rendererType:t.ComponentMarkupRenderBase},loadpanel:{rendererType:t.ComponentMarkupRenderBase},datebox:{rendererType:t.DateboxMarkupRender,events:["onChange"]},box:{rendererType:t.BoxMarkupRender,defaults:{visible:!0}},container:{rendererType:t.ContainerMarkupRender,defaults:{visible:!0,style:{verticalAlign:"top"}}},list:{rendererType:t.ListMarkupRender,defaults:{scrollable:!0},events:["onItemClick","onItemHold","onPullRefresh"],componentViewModel:function(e){return $.extend(e,e.editConfig),delete e.editConfig,e}},lookup:{rendererType:t.ComponentMarkupRenderBase,componentViewModel:function(t){var r=t.value?ko.unwrap(t.value):void 0,n=t.valueExpression?DevExpress.data.utils.compileGetter(ko.unwrap(t.valueExpression)):function(e){return e};return t=e.remap(t,{valueExpression:"valueExpr",displayExpression:"displayExpr"},!0),t&&ko.unwrap(t.items)&&$.isArray(ko.unwrap(t.items))&&ko.unwrap(t.items).forEach(function(e){JSON.stringify(r)===JSON.stringify(n(e))&&t.value(n(e))}),t}},tabpanel:{rendererType:t.TabsMarkupRender,defaults:{style:{}}},tabs:{rendererType:t.ComponentMarkupRenderBase,defaults:{showNavButtons:!1}},accordion:{rendererType:t.AccordionMarkupRender},datagrid:{rendererType:t.ComponentMarkupRenderBase,events:["onRowClick"],componentViewModel:function(t){var r=ko.unwrap(t.dataSource);if(r&&r._calculatedFields){var n=r._calculatedFields;t.onRowUpdating=function(t){var r=t.newData;$.each(r,function(t,i){e.findInArray(n,function(e){return e.name===t})&&delete r[t]})}}return t}},row:{rendererType:t.RowMarkupRender,defaults:{visible:!0}},column:{rendererType:t.ComponentMarkupRenderBase},fieldset:{rendererType:t.FieldsetMarkupRender,defaults:{visible:!0}},command:{rendererType:t.CommandMarkupRender,defaults:{visible:!0,disabled:!1,buttonType:"normal"},events:["onExecute"]},scrollview:{rendererType:t.ScrollViewMarkupRender}}}(t=e.Views||(e.Views={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";var r=DevExpress.devices,n=function(){function t(e){var r=this;this.PHOTOLIBRARY=0,this.CAMERA=1,this.actionSheetOptions=ko.observable(null),this.fileSelected=function(e,t){var n=t.currentTarget.parentElement.getElementsByTagName("input")[0];r._handleFiles(t.target,r.value),n.value=null},this.style=e.style,this.value=e.value||ko.observable(),this.visible=e.visible,this.imageSrc=ko.computed(function(){return t.addBase64Header(ko.unwrap(ko.unwrap(r.value)))}),this.emptyLabelVisible=ko.computed(function(){return!r.imageSrc()}),this.imageStyle=ko.computed(function(){var e=r.style,t=isNaN(parseInt(e.width,10))?void 0:e.width,n=isNaN(parseInt(e.height,10))?void 0:e.height;return r.emptyLabelVisible()?{width:t||n,height:n||t}:{width:t||"auto",height:n||"auto"}}),this.emptyLabel=e.emptyLabel,this.clearText=e.clearText,this.takePhotoText=e.takePhotoText,this.openGalleryText=e.openGalleryText}return t.addBase64Header=function(t){return null==t||"(Image)"===t||""===t?null:e.startsWith(t,"http")?t:this.fullBase64Header+this.removeBase64Header(t)},t.removeBase64Header=function(e){if(null!==e){var t=e.indexOf(this.base64Header);return-1===t?e:e.substr(t+this.base64Header.length)}},t.prototype._getActionSheetOption=function(e){var t=this,n="desktop"===r.current().deviceType,i=!!window.cordova,o=[{text:this.takePhotoText,fileSelected:this.fileSelected,touchStart:function(){},visible:i,click:function(e){t._cordovaCameraDelegate(t.CAMERA)}},{text:this.openGalleryText,fileSelected:this.fileSelected,touchStart:function(){i||(t.control.hide(),t.showFileDialog(e))},visible:!0,click:function(r){i?t._cordovaCameraDelegate(t.PHOTOLIBRARY):t.showFileDialog(e)}},{text:this.clearText,fileSelected:this.fileSelected,visible:!this.emptyLabelVisible(),touchStart:function(){},click:function(){t.value(null)}}];return{target:e.currentTarget,usePopover:n,visible:ko.observable(!1),showTitle:!1,width:n?"auto":void 0,dataSource:o,onItemClick:function(e){e.itemData.click(e)},onInitialized:function(e){t.control=e.component}}},t.prototype._cordovaCameraDelegate=function(e){void 0===e&&(e=this.CAMERA);var t=function(e){this.value(e)},r=function(e){console.log("Failed because: "+e)};navigator.camera.getPicture(t.bind(this),r,{quality:50,destinationType:0,sourceType:e})},t.prototype._handleFiles=function(e,r){for(var n=e.files,i=0;i<n.length;i++){var o=n[i],a=/image.*/;if(o.type.match(a)){var s=new FileReader;s.onload=function(e){r(t.removeBase64Header(s.result))},s.readAsDataURL(o)}}},t.prototype.showFileDialog=function(e){var t=e.currentTarget.parentElement.getElementsByTagName("input")[0];t&&(t.click(),e.stopPropagation())},t.prototype.showFileDialogOrActionSheet=function(e,t){this.actionSheetOptions(this._getActionSheetOption(t)),this.emptyLabelVisible()&&!window.cordova?this.showFileDialog(t):this.actionSheetOptions().visible(!0)},t.fullBase64Header="data:image/png;base64,",t.base64Header="base64,",t}();t.FileImageEditorViewModel=n}(t=e.Views||(e.Views={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";var r=function(){function r(r,n,i){e.findInArray(r.params,function(e){return!!e.shared})&&(r.disableCache=!0),this.viewMarkup=$(new t.ViewMarkupRenderer(r,n).render()),this.viewModel=function(){var e=new t.ViewModel(r,n);return e.model}}return r}();t.View=r}(t=e.Views||(e.Views={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(t){"use strict";var r=DevExpress.data,n=function(){function n(t,r){var n=this;this.events={},this.alreadyShown=!1,t.model=t.model||[],this.model=e.Model.createModel(t,r),this.viewConfig=t,this.patchEvents(r),this.model._functions=r.functions,this.model._global=r.model,this.model._scrollViewResetter={reset:function(){}},0===(t.model||[]).filter(function(e){return"title"===e.name}).length&&(this.model.title=ko.pureComputed(function(){return e.getModelValue(t.title||"",{$global:r.model,$model:n.model},{callerId:"title",callerType:"View model"})}));var i=ko.observable(t.params?0===t.params.length:!0);this.model.isReady=ko.observable(!1),this.model.viewShowing=function(e){n.alreadyShown&&!t.refreshWhenShown||n.setModelValueFromParameter(r,i,e&&e.params);var o=((e.viewInfo||{}).layoutController||{})._popup;o&&["height","width"].forEach(function(e){t[e]&&(o.option(e,t[e]),o.option("fullScreen")&&o.option("fullScreen",!1))})},this.model.viewShown=function(o){n.alreadyShown?t.refreshWhenShown&&(e.Model.initializeDataSources(n.model,{$model:n.model,$global:r.model},r,r.stores,!0,t.dataSources),n.model._scrollViewResetter.reset()):(ko.computed(function(){n.model.isReady(ko.unwrap(i))}),e.Model.initializeDataSources(n.model,{$model:n.model,$global:r.model},r,r.stores,!1,t.dataSources),n.alreadyShown=!0),n.refreshStrategies?n.refreshStrategies.forEach(function(e){e.enabled=!0,e.refresh()}):n.refreshStrategies=n.createRefreshStrategies(r,o&&o.params),n.onEvent("onShow",o&&o.params&&o.params.parameters)},this.model.viewHidden=function(){t.refreshWhenShown&&(i(!1),n.clearModel(r)),n.refreshStrategies.forEach(function(e){e.hidden()}),n.onEvent("onHide")},this.model.viewDisposing=function(){n.model.dispose(),n.refreshStrategies&&(n.refreshStrategies.forEach(function(e){e.dispose()}),n.refreshStrategies.splice(0,n.refreshStrategies.length)),n.onEvent("onDispose")},this.onEvent("onLoad")}return n.optional=function(e){return void 0!==e.defaultValue},n.prototype.clearModel=function(t){var r=this,n=e.Model.createModel(this.viewConfig,t);this.viewConfig.model.filter(function(e){return!e.getter}).forEach(function(e){var t=e.name;r.model[t]=n[t]})},n.prototype.patchEvents=function(e){var r=this,n=t.componentInfos.view;
n.events.forEach(function(t){var n,i=r.viewConfig[t];i&&e.createFunctionCompiler&&(n=e.createFunctionCompiler(i),r.events[t]=function(i){return n.run({$global:e.model,$model:r.model,$data:i},{callerType:"view event",callerId:t})})})},n.prototype.onEvent=function(e,t){var r=this.events[e];r&&r(t)},n.prototype.createRefreshStrategies=function(n,i){var o=this,a=[];return $.each(this.model,function(e,i){if(i instanceof r.DataSource){var o=i,s=t.DataSourceRefreshStrategy.create(o);s&&a.push(s),o._monitor&&o._monitor.stores&&o._monitor.stores.length>0&&a.push(new t.MonitorRefreshStrategy(o,n,o._monitor.stores))}}),this.viewConfig.params&&this.viewConfig.params.forEach(function(r){var s=n.typeInfoRepository.get(r.type);if(s&&s.kind===e.TYPES.STORE_TYPE){var l=t.ParameterRefreshStrategy.create(r,o.model,n,i);l&&a.push(l)}}),a},n.prototype.setModelValueFromParameter=function(t,r,n){var i=this,o=0;this.viewConfig.params&&this.viewConfig.params.forEach(function(a){var s,l=t.typeInfoRepository.get(a.type);if(a.shared)"undefined"==typeof t.sharedObjects[a.name]&&console.error("Shared parameter '"+a.name+"' is missing from the sharedObjects collection."),i.model[a.name]=t.sharedObjects[a.name];else if(l&&l.kind===e.TYPES.STORE_TYPE)if(s=n.parameters?n.parameters[a.name]:void 0){var u=t.stores[a.type];o++,u.byKey(s,{expand:a.expand}).then(function(e){i.model[a.name]=e},function(){t.processParameterLoadingError(a.name,s)}).always(function(){o--,r(!o)})}else i.model[a.name]=a.defaultValue;else i.model[a.name]=n.parameters&&n.parameters[a.name]||a.defaultValue}),r(0===o)},n}();t.ViewModel=n}(t=e.Views||(e.Views={}))}(AppPlayer||(AppPlayer={}));var AppPlayer;!function(e){var t;!function(e){"use strict";var t=function(){function e(e){this.ds=e,this.enabled=!0}return e.create=function(t){switch(t._refreshOnViewShown){case"never":return null;case"always":return new e(t);case"whenChanges":default:return new r(t)}},e.prototype.refresh=function(){this.ds.load()},e.prototype.dispose=function(){},e.prototype.hidden=function(){this.enabled=!1},e}();e.DataSourceRefreshStrategy=t;var r=function(e){function t(t){var r=this;e.call(this,t),this.ds=t,this.callback=function(){r.modified=!0,r.enabled&&r.refresh()},this.ds.store().on("modified",this.callback)}return __extends(t,e),t.prototype.refresh=function(){this.modified&&(this.modified=!1,e.prototype.refresh.call(this))},t.prototype.dispose=function(){this.ds.store().off("modified",this.callback)},t}(t),n=function(){function e(e,t,r,n){this.enabled=!0,this.param=e,this.model=t,this.application=r,this.store=r.stores[e.type]}return e.create=function(t,r,n,o){switch(t.refreshOnViewShown){case"never":return null;case"always":return new e(t,r,n,o);case"whenChanges":default:return new i(t,r,n,o)}},e.prototype.refresh=function(){var e=this,t=this.store.keyOf(this.model[this.param.name]);t&&this.store.byKey(t,{expand:this.param.expand}).done(function(t){e.model[e.param.name]=t})},e.prototype.dispose=function(){},e.prototype.hidden=function(){this.enabled=!1},e}();e.ParameterRefreshStrategy=n;var i=function(e){function t(t,r,n,i){var o=this;e.call(this,t,r,n,i),this.modified=!1,this.removed=!1;var a=i.parameters?i.parameters[t.name]:void 0;this.insertedCallback=function(e,t){t===a&&(o.modified=!0,o.enabled&&o.refresh())},this.store.on("inserted",this.insertedCallback),this.updatedCallback=function(e,t){o.enabled||void 0!==a&&e!==a||(o.modified=!0,o.enabled&&o.refresh())},this.store.on("updated",this.updatedCallback)}return __extends(t,e),t.prototype.refresh=function(){this.modified&&(this.modified=!1,e.prototype.refresh.call(this))},t.prototype.dispose=function(){this.store.off("inserted",this.insertedCallback),this.store.off("updated",this.updatedCallback)},t}(n),o=function(){function e(e,t,r){var n=this;this.ds=e,this.application=t,this.storeIds=r,this.enabled=!0,this.modified=!1,this.refreshFunc=function(){n.modified=!0,n.refresh()},this.storeIds.forEach(function(e){var t=n.application.stores[e];t.on("modified",n.refreshFunc)})}return e.prototype.refresh=function(){this.enabled&&(this.ds.load(),this.modified=!1)},e.prototype.dispose=function(){var e=this;this.storeIds.forEach(function(t){var r=e.application.stores[t];r.off("modified",e.refreshFunc)})},e.prototype.hidden=function(){this.enabled=!1},e}();e.MonitorRefreshStrategy=o}(t=e.Views||(e.Views={}))}(AppPlayer||(AppPlayer={}));
//# sourceMappingURL=../sourcemaps/appPlayer-ver1.8.9.js.map
